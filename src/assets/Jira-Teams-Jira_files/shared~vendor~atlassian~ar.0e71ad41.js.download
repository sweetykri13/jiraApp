try{window.performance.mark("shared~vendor~atlassian~ar.js:eval-start")}catch(e){}function e(e,t,r,i){Object.defineProperty(e,t,{get:r,set:i,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r=globalThis,i={},s={},n=r.parcelRequire000f;null==n&&(n=function(e){if(e in i)return i[e].exports;if(e in s){var t=s[e];delete s[e];var r={id:e,exports:{}};return i[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n},n.register=function(e,t){s[e]=t},r.parcelRequire000f=n);var a=n.register;r.lb||(r.lb=new Set,r.bq=[],r.rlb=e=>{r.lb.add(e),r.pq()},r.rwr=(e,t,i)=>{r.bq.push({b:e,r:t,d:i}),r.pq()},r.pq=()=>{var e=r.bq.find(e=>e.d.every(e=>r.lb.has(e)));e&&(r.bq=r.bq.filter(t=>t.b!==e.b),e.r(),r.pq())}),a("kXY4z",function(t,r){e(t.exports,"serializeStyles",()=>g);var i,s=n("kNNmE"),a=n("1l72c"),o=n("3vBWa"),l=/[A-Z]|^ms/g,c=/_EMO_([^_]+?)_([^]*?)_EMO_/g,u=function(e){return 45===e.charCodeAt(1)},d=function(e){return null!=e&&"boolean"!=typeof e},h=(0,o.default)(function(e){return u(e)?e:e.replace(l,"-$&").toLowerCase()}),p=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(c,function(e,t,r){return i={name:t,styles:r,next:i},t})}return 1===a.default[e]||u(e)||"number"!=typeof t||0===t?t:t+"px"};function f(e,t,r,s){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return i={name:r.name,styles:r.styles,next:i},r.name;if(void 0!==r.styles){var n=r.next;if(void 0!==n)for(;void 0!==n;)i={name:n.name,styles:n.styles,next:i},n=n.next;return r.styles+";"}return function(e,t,r){var i="";if(Array.isArray(r))for(var s=0;s<r.length;s++)i+=f(e,t,r[s],!1);else for(var n in r){var a=r[n];if("object"!=typeof a)null!=t&&void 0!==t[a]?i+=n+"{"+t[a]+"}":d(a)&&(i+=h(n)+":"+p(n,a)+";");else if(Array.isArray(a)&&"string"==typeof a[0]&&(null==t||void 0===t[a[0]]))for(var o=0;o<a.length;o++)d(a[o])&&(i+=h(n)+":"+p(n,a[o])+";");else{var l=f(e,t,a,!1);switch(n){case"animation":case"animationName":i+=h(n)+":"+l+";";break;default:i+=n+"{"+l+"}"}}}return i}(e,t,r);case"function":if(void 0!==e){var a=i,o=r(e);return i=a,f(e,t,o,s)}}if(null==t)return r;var l=t[r];return void 0===l||s?r:l}var m=/label:\s*([^\s;\n{]+)\s*;/g,g=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n,a=!0,o="";i=void 0;var l=e[0];null==l||void 0===l.raw?(a=!1,o+=f(r,t,l,!1)):o+=l[0];for(var c=1;c<e.length;c++)o+=f(r,t,e[c],46===o.charCodeAt(o.length-1)),a&&(o+=l[c]);m.lastIndex=0;for(var u="";null!==(n=m.exec(o));)u+="-"+n[1];return{name:(0,s.default)(o)+u,styles:o,next:i}}}),a("kNNmE",function(t,r){e(t.exports,"default",()=>i);var i=function(e){for(var t,r=0,i=0,s=e.length;s>=4;++i,s-=4)t=(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))*1540483477+((t>>>16)*59797<<16),t^=t>>>24,r=(65535&t)*1540483477+((t>>>16)*59797<<16)^(65535&r)*1540483477+((r>>>16)*59797<<16);switch(s){case 3:r^=(255&e.charCodeAt(i+2))<<16;case 2:r^=(255&e.charCodeAt(i+1))<<8;case 1:r^=255&e.charCodeAt(i),r=(65535&r)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,(((r=(65535&r)*1540483477+((r>>>16)*59797<<16))^r>>>15)>>>0).toString(36)}}),a("1l72c",function(t,r){e(t.exports,"default",()=>i);var i={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}}),a("3vBWa",function(t,r){e(t.exports,"default",()=>i);var i=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}}),a("1gXD0",function(e,t){var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),i=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return i(t,e),t},a=e.exports&&e.exports.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)},o=e.exports&&e.exports.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>t.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r},l=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.EvaluationReason=e.exports.DynamicConfig=void 0;let c=s(n("avKkz")),u=l(n("8Iy4N"));var d=n("euKUd");Object.defineProperty(e.exports,"DynamicConfig",{enumerable:!0,get:function(){return n("avKkz").DynamicConfig}}),Object.defineProperty(e.exports,"EvaluationReason",{enumerable:!0,get:function(){return n("avKkz").EvaluationReason}}),a(n("47Qbx"),e.exports);let h="client-default-key";class p{static async initialize(e,t,r){if(p.initPromise)return p.shallowEquals(e,p.initOptions)||console.warn("Feature Gates client already initialized with different options. New options were not applied."),p.initPromise;let i=performance.now();return p.initOptions=e,p.initPromise=p.init(e,t,r).then(()=>{p.initCompleted=!0}).finally(()=>{let t=performance.now(),r=t-i;p.fireClientEvent(i,r,"initialize",p.initCompleted,e.apiKey)}),p.initPromise}static fireClientEvent(e,t,r,i,s){var a;null===(a=p.initOptions.analyticsWebClient)||void 0===a||a.then(n=>{let a=Object.assign({targetApp:p.initOptions.targetApp,clientVersion:d.CLIENT_VERSION,success:i,startTime:e,totalTime:t},s&&{apiKey:s});n.sendOperationalEvent({action:r,actionSubject:"featureGatesClient",attributes:a,tags:["measurement"],source:"@atlassian/feature-gate-js-client"})}).catch(e=>{p.initOptions.environment!==n("47Qbx").FeatureGateEnvironment.Production&&console.error("Analytics web client promise did not resolve",e)})}static async initializeFromValues(e,t,r,i={}){if(p.initPromise)return p.shallowEquals(e,p.initOptions)||console.warn("Feature Gates client already initialized with different options. New options were not applied."),p.initPromise;let s=performance.now();return p.initOptions=e,p.initPromise=p.initFromValues(e,t,r,i).then(()=>{p.initCompleted=!0}).finally(()=>{let e=performance.now(),t=e-s;p.fireClientEvent(s,t,"initializeFromValues",p.initCompleted)}),p.initPromise}static async updateUser(e,t,r){await p.updateUserUsingInitializeValuesProducer(()=>u.default.fetchExperimentValues(e,t,r).then(({experimentValues:e,customAttributes:t})=>({experimentValues:e,customAttributesFromFetch:t})),t,r)}static async updateUserWithValues(e,t,r={}){await p.updateUserUsingInitializeValuesProducer(()=>Promise.resolve({experimentValues:r,customAttributesFromFetch:t}),e,t)}static initializeCalled(){return null!=p.initPromise}static initializeCompleted(){return p.initCompleted}static checkGate(e){try{return c.default.checkGate(e)}catch(t){return p.hasCheckGateErrorOccurred||(console.warn({msg:"An error has occurred checking the feature gate. Only the first occurrence of this error is logged.",gateName:e,error:t}),p.hasCheckGateErrorOccurred=!0),!1}}static getExperiment(e,t={}){try{let{fireExperimentExposure:r=!0}=t,i=r?c.default.getExperiment.bind(c.default):c.default.getExperimentWithExposureLoggingDisabled.bind(c.default);return i(e)}catch(t){return p.hasGetExperimentErrorOccurred||(console.warn({msg:"An error has occurred getting the experiment. Only the first occurrence of this error is logged.",experimentName:e,error:t}),p.hasGetExperimentErrorOccurred=!0),new c.DynamicConfig(e,{},"",{time:Date.now(),reason:c.EvaluationReason.Error})}}static getExperimentValue(e,t,r,i={}){let s=p.getExperiment(e,i);try{let{typeGuard:e}=i;return s.get(t,r,e)}catch(t){return p.hasGetExperimentValueErrorOccurred||(console.warn({msg:"An error has occurred getting the experiment value. Only the first occurrence of this error is logged.",experimentName:e,defaultValue:r,options:i,error:t}),p.hasGetExperimentValueErrorOccurred=!0),r}}static manuallyLogExperimentExposure(e){c.default.manuallyLogExperimentExposure(e)}static shutdownStatsig(){c.default.shutdown()}static overrideGate(e,t){c.default.overrideGate(e,t)}static clearGateOverride(e){c.default.overrideGate(e,null)}static overrideConfig(e,t){c.default.overrideConfig(e,t)}static clearConfigOverride(e){c.default.overrideConfig(e,null)}static setOverrides(e){c.default.setOverrides(Object.assign({gates:{},configs:{},layers:{}},e))}static clearAllOverrides(){c.default.setOverrides(null)}static isCurrentUser(e,t){return p.shallowEquals(p.currentIdentifiers,e)&&p.shallowEquals(p.currentAttributes,t)}static async init(e,t,r){let i,s;let n=Object.assign(Object.assign({},e),{disableCurrentPageLogging:!0});if(e.localMode){console.info("Initialising Statsig client in local mode without values"),await p.initFromValues(n,t,r);return}try{let a=u.default.fetchClientSdk(e).then(e=>n.sdkKey=e.clientSdkKey),o=u.default.fetchExperimentValues(e,t,r),[,l]=await Promise.all([a,o]);i=l.experimentValues,s=l.customAttributes}catch(e){throw e instanceof Error&&console.error(`Error occurred when trying to fetch the Feature Gates client values, error: ${null==e?void 0:e.message}`),console.warn("Initialising Statsig client without values"),await p.initFromValues(n,t,r),e}await this.initFromValues(n,t,s,i)}static async initFromValues(e,t,r,i={}){let s=this.toStatsigUser(t,r);p.currentIdentifiers=t,p.currentAttributes=r,e.sdkKey||(e.sdkKey=h),e.eventLoggingApi||(e.eventLoggingApi="https://xp.atlassian.com/v1/");let{sdkKey:n}=e,a=this.toStatsigOptions(e,i);try{await c.default.initialize(n,s,a)}catch(e){throw e instanceof Error&&console.error(`Error occurred when trying to initialise the Statsig client, error: ${null==e?void 0:e.message}`),console.warn("Initialising Statsig client with default sdk key and without values"),await c.default.initialize(h,s,Object.assign(Object.assign({},a),{initializeValues:{}})),e}}static toStatsigUser(e,t){let r={customIDs:e,custom:t};return e.atlassianAccountId&&(r.userID=e.atlassianAccountId),r}static async updateUserUsingInitializeValuesProducer(e,t,r){if(!p.initPromise)throw Error("The FeatureGates client must be initialized before you can update the user.");if(p.isCurrentUser(t,r))return p.initPromise;let i=p.initPromise;try{await p.initPromise}catch(e){}let s=e(),n=p.updateStatsigClientUser(s,t,r);return p.initPromise=n.catch(()=>{p.initPromise=i}),n}static async updateStatsigClientUser(e,t,r){var i,s;let n,a;try{n=await e,a=p.toStatsigUser(t,n.customAttributesFromFetch)}catch(t){let e=t instanceof Error?t.message:JSON.stringify(t);throw null===(s=(i=p.initOptions).updateUserCompletionCallback)||void 0===s||s.call(i,!1,e),t}let o=c.default.updateUserWithValues(a,n.experimentValues);if(o)p.currentIdentifiers=t,p.currentAttributes=r;else throw Error("Failed to update user. An unexpected error occured.")}static toStatsigOptions(e,t){let{sdkKey:r,updateUserCompletionCallback:i}=e,s=o(e,["sdkKey","updateUserCompletionCallback"]);return Object.assign(Object.assign(Object.assign({},s),{initializeValues:t,environment:{tier:e.environment},disableCurrentPageLogging:!0}),e.updateUserCompletionCallback&&{updateUserCompletionCallback:p.toStatsigUpdateUserCompletionCallback(e.updateUserCompletionCallback)})}static toStatsigUpdateUserCompletionCallback(e){return(t,r,i)=>{e(r,i)}}static shallowEquals(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;let r=Object.entries(e),i=Object.entries(t);if(r.length!==i.length)return!1;let s=([e],[t])=>e.localeCompare(t);r.sort(s),i.sort(s);for(let e=0;e<r.length;e++){let[,t]=r[e],[,s]=i[e];if(t!==s)return!1}return!0}static getPackageVersion(){return d.CLIENT_VERSION}}p.initPromise=null,p.initCompleted=!1,p.hasGetExperimentErrorOccurred=!1,p.hasGetExperimentValueErrorOccurred=!1,p.hasCheckGateErrorOccurred=!1;let f=p;if("undefined"!=typeof window){if(void 0===window.__FEATUREGATES_JS__)window.__FEATUREGATES_JS__=p;else{f=window.__FEATUREGATES_JS__;let e=(null==f?void 0:f.getPackageVersion())||"4.10.0 or earlier",t=`Multiple versions of FeatureGateClients found on the current page.
        The currently bound version is ${e} when module version ${d.CLIENT_VERSION} was loading.`;console.warn(t)}}e.exports.default=f}),a("8Iy4N",function(e,t){var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var i=n("4mqpc");Object.defineProperty(e.exports,"default",{enumerable:!0,get:function(){return r(i).default}})}),a("4mqpc",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=n("5MqyX"),i=n("47Qbx"),s=n("euKUd");class a{static async fetchClientSdk(e){let{targetApp:t}=e,r=`/api/v2/frontend/clientSdkKey/${t}`;try{return await this.fetchRequest(r,"GET",e)}catch(e){if(e instanceof Error)throw e;throw Error("Failed to retrieve client sdk key")}}static async fetchExperimentValues(e,t,r){let i={identifiers:t,customAttributes:r,targetApp:e.targetApp};try{return await this.fetchRequest("/api/v2/frontend/experimentValues","POST",e,i)}catch(e){if(e instanceof Error)throw e;throw Error("Failed to retrieve experiment values")}}static async handleResponseError(e){if(!e.ok){let t=await e.text();throw new r.ResponseError(`Non 2xx response status received, status: ${e.status}, body: ${JSON.stringify(t)}`)}if(204===e.status)throw new r.ResponseError("Unexpected 204 response")}static async extractResponseBody(e){let t=await e.text();return JSON.parse(t)}static getBaseUrl(e,t=!1){if(t)return"/gateway/api/flags";switch(e){case i.FeatureGateEnvironment.Development:return"https://api.dev.atlassian.com/flags";case i.FeatureGateEnvironment.Staging:return"https://api.stg.atlassian.com/flags";default:return"https://api.atlassian.com/flags"}}static async fetchRequest(e,t,r,i){let n;let o=a.getBaseUrl(r.environment,r.useGatewayURL),l=r.fetchTimeoutMs||2e3;if(AbortSignal.timeout)n=AbortSignal.timeout(l);else if(AbortController){let e=new AbortController;n=e.signal,setTimeout(()=>e.abort(),l)}let c=await fetch(`${o}${e}`,Object.assign({method:t,headers:{"Content-Type":"application/json","X-Client-Name":"feature-gate-js-client","X-Client-Version":s.CLIENT_VERSION,"X-API-KEY":r.apiKey},signal:n},i&&{body:JSON.stringify(i)}));return await this.handleResponseError(c),await this.extractResponseBody(c)}}e.exports.default=a}),a("5MqyX",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ResponseError=void 0,e.exports.ResponseError=class extends Error{constructor(e){super(e)}}}),a("47Qbx",function(e,t){var r,i;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FeatureGateEnvironment=void 0,(i=r||(e.exports.FeatureGateEnvironment=r={})).Development="development",i.Staging="staging",i.Production="production"}),a("euKUd",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CLIENT_VERSION=void 0,e.exports.CLIENT_VERSION="4.12.1"}),a("bMN4E",function(t,r){e(t.exports,"allFeatureFlagsAccessed",()=>i),e(t.exports,"currentFeatureFlagsAccessed",()=>s),e(t.exports,"addFeatureFlagAccessed",()=>a);let i=new Map,s=new Map,a=(e,t)=>{let r=(0,n("8dvZE").redactValue)(t);i.set(e,r),s.set(e,r)}}),a("8dvZE",function(t,r){e(t.exports,"redactValue",()=>l);let i=e=>{try{if("{"===e.charAt(0))return!0}catch(e){}return!1},s=e=>e&&"object"==typeof e&&e.constructor===Object,n=e=>{let t;try{t="string"==typeof e||e instanceof String}catch(e){t=!1}return t},a=e=>n(e)&&i(e)||s(e),l=e=>a(e)?o:e});const o="non_boolean";a("gmPP3",function(t,r){e(t.exports,"CompressionRule",()=>s);var i=n("5zQU9");class s{constructor(e,t){if((0,i.default)(this,"canCompress",e=>{try{return e&&(0,n("49KuO").isActionEventType)(e.eventType)&&this.predicate(e)}catch(e){return!1}}),(0,i.default)(this,"compress",e=>{let[t,r]=(0,n("eaJEm").partition)(e,e=>this.canCompress(e)),i=this.compressFn(t);if(!i)throw Error("No events were returned from the compression function");return i.forEach(e=>{(0,n("49KuO").validateActionEventType)(e.eventType),(0,n("49KuO").validateActionEvent)(e)}),i.concat(r)}),"function"!=typeof e)throw Error("Invalid predicate, must be a function that accepts an event and returns a boolean");if("function"!=typeof t)throw Error("Invalid compressFn, must be a function that both accepts and returns an array of events");this.predicate=e,this.compressFn=t}}}),a("49KuO",function(t,r){e(t.exports,"validateContainers",()=>s),e(t.exports,"isActionEventType",()=>a),e(t.exports,"validateActionEventType",()=>o),e(t.exports,"validateActionEvent",()=>l),e(t.exports,"validateScreenEvent",()=>c),e(t.exports,"validateTrackEvent",()=>u),e(t.exports,"validateDwellBaseEvent",()=>d),e(t.exports,"validateUIEvent",()=>h),e(t.exports,"validateOperationalEvent",()=>p),e(t.exports,"validateIdentifyEvent",()=>f),e(t.exports,"validatePlatform",()=>m);let i=Object.freeze([n("hRleJ").eventType.OPERATIONAL,n("hRleJ").eventType.TRACK,n("hRleJ").eventType.UI]);function s(e){if(e){if(e&&e.constructor!==Object)throw Error("properties.containers must be an Object");Object.values(e).forEach(e=>(function(e){if(!(0,n("f6ddt").isPlainObject)(e))throw Error("properties.containers must be an Object");if(!("id"in e))throw Error("properties.containers is missing field 'id'");if("string"!=typeof e.id)throw Error("properties.containers.id must be of type String");if("type"in e&&"string"!=typeof e.type)throw Error("properties.containers.type must be of type String")})(e))}}function a(e){switch(e){case n("hRleJ").eventType.OPERATIONAL:case n("hRleJ").eventType.TRACK:case n("hRleJ").eventType.UI:return!0;default:return!1}}function o(e){if(!a(e))throw Error(`Invalid action event type: ${e}, must be one of: [${i}]`);return!0}function l(e){if(!e)throw Error("Missing event");if(!e.source)throw Error("Missing event.source");if(!e.actionSubject)throw Error("Missing event.actionSubject");if(!e.action)throw Error("Missing event.action");s(e.containers)}function c(e){if(!e)throw Error("Missing name")}function u(e){l(e)}function d(e){if(!e)throw Error("Missing event");if(!e.source)throw Error("Missing event.source");if(!e.actionSubject)throw Error("Missing event.actionSubject")}function h(e){l(e)}function p(e){l(e)}function f(e,t){if(!e)throw Error("Missing userIdType");if(!t)throw Error("Missing userId");if(!(0,n("hRleJ").isType)(n("hRleJ").userType,e))throw Error(`Invalid userIdType '${e}', must be an userType: [${(0,n("hRleJ").objectValues)(n("hRleJ").userType)}]`)}function m(e){if(!(0,n("hRleJ").isType)(n("hRleJ").platformType,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be a platformType: [${(0,n("hRleJ").objectValues)(n("hRleJ").platformType)}]`);if(e.origin===n("hRleJ").originType.DESKTOP&&!(0,n("hRleJ").isType)(n("hRleJ").desktopPlatforms,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be one of [mac, linux, windows]`);if(e.origin===n("hRleJ").originType.WEB&&!(0,n("hRleJ").isType)(n("hRleJ").webPlatforms,e.platform))throw Error(`Invalid productInfo.platform '${e.platform}', must be one of [web, mobileWeb]`)}}),a("hRleJ",function(t,r){var i,s,n,a,o,l,c,u,d,h,p;e(t.exports,"envType",()=>f),e(t.exports,"eventType",()=>m),e(t.exports,"platformType",()=>g),e(t.exports,"originType",()=>y),e(t.exports,"tenantType",()=>v),e(t.exports,"userType",()=>b),e(t.exports,"apdexType",()=>E),e(t.exports,"desktopPlatforms",()=>I),e(t.exports,"webPlatforms",()=>O),e(t.exports,"originTracingType",()=>w),e(t.exports,"objectValues",()=>T),e(t.exports,"isType",()=>S),e(t.exports,"perimeterType",()=>_),e(t.exports,"aliasType",()=>A),e(t.exports,"groupType",()=>P),e(t.exports,"envOverrides",()=>x);let f=((i={}).LOCAL="local",i.DEV="dev",i.STAGING="staging",i.PROD="prod",i),m=((s={}).TRACK="track",s.UI="ui",s.OPERATIONAL="operational",s.SCREEN="screen",s.IDENTIFY="identify",s),g=((n={}).MAC="mac",n.LINUX="linux",n.WINDOWS="windows",n.DESKTOP="desktop",n.WEB="web",n.MOBILE_WEB="mobileWeb",n),y=((a={}).DESKTOP="desktop",a.WEB="web",a),v=((o={}).CLOUD_ID="cloudId",o.ORG_ID="orgId",o.OPSGENIE_CUSTOMER_ID="opsgenieCustomerId",o.HALP_TEAM_ID="halpTeamId",o.TRANSACTION_ACCOUNT_ID="transactionAccountId",o.TRELLO_WORKSPACE_ID="trelloWorkspaceId",o.NONE="none",o),b=((l={}).ATLASSIAN_ACCOUNT="atlassianAccount",l.HASHED_EMAIL="hashedEmail",l.TRELLO="trello",l.OPSGENIE="opsgenie",l.HALP="halp",l),E=((c={}).TRANSITION="transition",c.INITIAL_LOAD="initialLoad",c),I=Object.freeze([g.DESKTOP,g.MAC,g.LINUX,g.WINDOWS]),O=Object.freeze([g.WEB,g.MOBILE_WEB]),w=((u={}).ATL_ORIGIN="atlOrigin",u);function T(e){return Object.values(e)}function S(e,t){return Object.values(e).indexOf(t)>-1}let _=((d={}).C5="c5",d.COMMERCIAL="commercial",d.FEDRAMP_MODERATE="fedramp-moderate",d.FEDRAMP_HIGH="fedramp-high",d),A={},P=((h={}).TRANSACTION_ACCOUNT_ID="transactionAccountId",h),x=((p={}).FEDRAMP_MODERATE_SANDBOX="fedramp-moderate-sandbox",p)}),a("f6ddt",function(t,r){function i(e){return!0==(null!==e&&"object"==typeof e&&!1===Array.isArray(e))&&"[object Object]"===Object.prototype.toString.call(e)}function s(e){if(!1===i(e))return!1;let t=e.constructor;if("function"!=typeof t)return!1;let r=t.prototype;return!1!==i(r)&&"isPrototypeOf"in r}e(t.exports,"isPlainObject",()=>s)}),a("eaJEm",function(t,r){e(t.exports,"mapKeys",()=>i),e(t.exports,"pick",()=>s),e(t.exports,"omitBy",()=>n),e(t.exports,"pickBy",()=>a),e(t.exports,"omit",()=>o),e(t.exports,"equals",()=>l),e(t.exports,"partition",()=>c);let i=(e,t)=>Object.keys(e).reduce((r,i)=>{let s=t(e[i],i,e);return r[s]=e[i],r},{}),s=(e,t)=>t.reduce((t,r)=>(r in e&&(t[r]=e[r]),t),{}),n=(e,t)=>Object.keys(e).filter(r=>!t(e[r],r)).reduce((t,r)=>(t[r]=e[r],t),{}),a=(e,t)=>Object.keys(e).filter(r=>t(e[r],r)).reduce((t,r)=>(t[r]=e[r],t),{}),o=(e,t)=>Object.keys(e).filter(e=>0>t.indexOf(e)).reduce((t,r)=>(t[r]=e[r],t),{}),l=(e,t)=>{if(e===t)return!0;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(!e||!t||"object"!=typeof e&&"object"!=typeof t)return e===t;if(e.prototype!==t.prototype)return!1;let r=Object.keys(e);return r.length===Object.keys(t).length&&r.every(r=>l(e[r],t[r]))},c=(e,t)=>e.reduce((e,r,i,s)=>(e[t(r,i,s)?0:1].push(r),e),[[],[]])}),a("aYU4Z",function(r,i){e(r.exports,"default",()=>u);var s=n("5zQU9"),a=n("dFBS3");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let c="last.screen.event";class u{constructor(e,r={}){if((0,s.default)(this,"_useStargate",e=>null==e||e),(0,s.default)(this,"_endsWith",(e,t)=>-1!==e.indexOf(t,e.length-t.length)),(0,s.default)(this,"_changeInternalUserId",(e,t)=>{this.eventProcessor.getUser().setUserId(e),t&&t!==this.eventProcessor.getUser().getAnonymousId()&&this.eventProcessor.getUser().setAnonymousId(t)}),(0,s.default)(this,"_createSubproductGetter",e=>(0,n("eIGW7").default)(e,"Cannot get subproduct from the callback. Proceeding without it.")),(0,s.default)(this,"_createEmbeddedProductGetter",e=>(0,n("eIGW7").default)(e,"Cannot get embeddedProduct from the callback. Proceeding without it.")),(0,s.default)(this,"_getLastScreenEvent",()=>{try{return JSON.parse(this._safeSessionStorage.getItem(c)||"")}catch(e){return this._safeSessionStorage.removeItem(c),null}}),(0,s.default)(this,"_setLastScreenEvent",e=>{this._safeSessionStorage.setItem(c,JSON.stringify({name:e.name,attributes:e.attributes}))}),(0,s.default)(this,"_shouldEventBeDelayed",e=>{if(!e.tags||-1===e.tags.indexOf("measurement"))return!1;let t=!1!==e.highPriority;return this.eventDelayQueue.isDelayingLowPriorityEvents()&&!t}),(0,s.default)(this,"_fireEvent",(e,t,r,i)=>{switch(t.eventType){case n("hRleJ").eventType.UI:case n("hRleJ").eventType.OPERATIONAL:case n("hRleJ").eventType.TRACK:return this.eventProcessor.track(e,t,r,i);case n("hRleJ").eventType.SCREEN:return this.eventProcessor.page(e,t,r,i);case n("hRleJ").eventType.IDENTIFY:return this.eventProcessor.identify(e,t,r,i);default:throw Error(`No handler has been defined for events of type ${t.eventType}`)}}),(0,s.default)(this,"_fireDelayedEvent",(e,t,r,i)=>{try{this._changeInternalUserId(i.userId,i.anonymousId),t.tags=[...t.tags||[],"sentWithDelay"],this._fireEvent(e,t,r,void 0)}finally{this._changeInternalUserId(this._userInfo.userId,this._userInfo.anonymousId)}}),(0,s.default)(this,"_delayEvent",(e,t,r,i,s)=>{this.eventDelayQueue.push(e,t,r,i),s&&s()}),(0,s.default)(this,"_processEvent",(e,t,r,i)=>(this._testingCache.saveEvent(t),this._shouldEventBeDelayed(t))?(this._delayEvent(e,t,r,this._userInfo,i),Promise.resolve()):this._fireEvent(e,t,r,i)),(0,s.default)(this,"setEmbeddedProduct",e=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(e),this.resetUIViewedTimers()}),(0,s.default)(this,"clearEmbeddedProduct",()=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(null)}),(0,s.default)(this,"setSubproduct",e=>{this._productInfo.subproduct=this._createSubproductGetter(e),this.resetUIViewedTimers()}),(0,s.default)(this,"setOriginTracingHandlers",e=>{let t=this.originTracing.handleOriginParameters(e,this._historyReplaceFn);Object.keys(t).forEach(e=>{void 0!==t[e].taskSessionId&&this.task.createTaskSessionWithProvidedId(e,t[e].taskSessionId)});let r={};return(Object.keys(t).forEach(e=>{t[e].originTracingAttributes?r[e]=t[e].originTracingAttributes:console.warn(`Handling method for origin parameter ${e} has not returned any attributes`)}),Object.keys(t).length>0)?this.sendOperationalEvent({action:"landed",actionSubject:"origin",source:"webClient",attributes:{originTracesLanded:r}},()=>{}):Promise.resolve()}),(0,s.default)(this,"setTenantInfo",(e,t)=>{if(!e)throw Error("Missing tenantIdType");if(e!==n("hRleJ").tenantType.NONE&&!t)throw Error("Missing tenantId");if(!(0,n("hRleJ").isType)(n("hRleJ").tenantType,e))throw Error(`Invalid tenantIdType '${e}', must be an tenantType: [${(0,n("hRleJ").objectValues)(n("hRleJ").tenantType)}]`);this._tenantInfo={tenantIdType:e,tenantId:t}}),(0,s.default)(this,"clearTenantInfo",()=>{this._tenantInfo={}}),(0,s.default)(this,"setOrgInfo",e=>{if(!e)throw Error("Missing orgId");this._orgInfo={orgId:e}}),(0,s.default)(this,"clearOrgInfo",()=>{this._orgInfo={}}),(0,s.default)(this,"setWorkspaceInfo",e=>{if(!e)throw Error("Missing workspaceId");this._workspaceInfo={workspaceId:e}}),(0,s.default)(this,"clearWorkspaceInfo",()=>{this._workspaceInfo={}}),(0,s.default)(this,"setUserInfo",(e,t)=>{(0,n("49KuO").validateIdentifyEvent)(e,t),this._changeInternalUserId(t),this._userInfo={userIdType:e,userId:t,anonymousId:this.eventProcessor.getUser().getAnonymousId()}}),(0,s.default)(this,"clearUserInfo",()=>{this._changeInternalUserId(void 0),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId()}}),(0,s.default)(this,"setAlias",(e,t)=>{if(!e)throw Error("Missing aliasType");if(!(0,n("hRleJ").isType)(n("hRleJ").aliasType,e))throw Error(`Invalid aliasType '${e}', must be an aliasType: [${(0,n("hRleJ").objectValues)(n("hRleJ").aliasType)}]`);this._aliases[e]=t}),(0,s.default)(this,"clearAlias",()=>{this._aliases={}}),(0,s.default)(this,"setGroup",(e,t)=>{if(!e)throw Error("Missing groupType");if(!(0,n("hRleJ").isType)(n("hRleJ").groupType,e))throw Error(`Invalid groupType '${e}', must be an groupType: [${(0,n("hRleJ").objectValues)(n("hRleJ").groupType)}]`);this._groups[e]=t}),(0,s.default)(this,"clearGroup",()=>{this._groups={}}),(0,s.default)(this,"getAnonymousId",()=>this._userInfo.anonymousId),(0,s.default)(this,"setUIViewedAttributes",e=>{if(!e)throw Error("Missing uiViewedAttributes");if("object"!=typeof e||Array.isArray(e))throw Error("Invalid uiViewedAttributes type, should be a non array object");this._uiViewedAttributes=l({},e)}),(0,s.default)(this,"getUIViewedAttributes",()=>this._uiViewedAttributes),(0,s.default)(this,"clearUIViewedAttributes",()=>{this._uiViewedAttributes={}}),(0,s.default)(this,"sendIdentifyEvent",(e,t,r)=>{this.setUserInfo(e,t);let i={userIdType:e,eventType:n("hRleJ").eventType.IDENTIFY};return this._processEvent(t,i,this._context,r)}),(0,s.default)(this,"sendPageEvent",(e,t)=>this.sendScreenEvent(e,t)),(0,s.default)(this,"sendScreenEvent",(e,t,r)=>{let i,s,a,o;"object"==typeof e?(i=e.name,s=e.attributes,a=e.containers,o=e.tags):(i=e,s=r),(0,n("49KuO").validateScreenEvent)(i),(0,n("49KuO").validateContainers)(a);let c=(0,n("bVXPQ").buildScreenEvent)(this._productInfo,this._tenantInfo,this._userInfo,s,e.nonPrivacySafeAttributes,o,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,e,a,this._aliases,this._groups),u=l({name:i},c);return this._setLastScreenEvent(u),this._processEvent(i,u,this._context,(0,n("1ZcVH").default)(t,u))}),(0,s.default)(this,"sendTrackEvent",(e,t)=>{(0,n("49KuO").validateTrackEvent)(e);let r=(0,n("bVXPQ").buildActionEvent)(this._productInfo,this._tenantInfo,this._userInfo,e,n("hRleJ").eventType.TRACK,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent((0,n("bVXPQ").buildActionName)(e),r,this._context,(0,n("1ZcVH").default)(t,r))}),(0,s.default)(this,"sendUIEvent",(e,t)=>{(0,n("49KuO").validateUIEvent)(e);let r=(0,n("bVXPQ").buildActionEvent)(this._productInfo,this._tenantInfo,this._userInfo,e,n("hRleJ").eventType.UI,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent((0,n("bVXPQ").buildActionName)(e),r,this._context,(0,n("1ZcVH").default)(t,r))}),(0,s.default)(this,"sendOperationalEvent",(e,t)=>{(0,n("49KuO").validateOperationalEvent)(e);let r=(0,n("bVXPQ").buildActionEvent)(this._productInfo,this._tenantInfo,this._userInfo,e,n("hRleJ").eventType.OPERATIONAL,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent((0,n("bVXPQ").buildActionName)(e),r,this._context,(0,n("1ZcVH").default)(t,r))}),(0,s.default)(this,"startUIViewedEvent",e=>{this.stopUIViewedEvent(),this._uiViewedEvent=new(n("fBPLq")).default(this._productInfo,()=>({embeddedProduct:this._productInfo.embeddedProduct(),subproduct:this._productInfo.subproduct(),tenantIdType:this._tenantInfo.tenantIdType,tenantId:this._tenantInfo.tenantId,userId:this._userInfo.userId,lastScreenEvent:this._getLastScreenEvent(),attributes:this._uiViewedAttributes}),t=>this.sendUIEvent(t,e)),this._uiViewedEvent.start()}),(0,s.default)(this,"stopUIViewedEvent",()=>{this._uiViewedEvent&&(this._uiViewedEvent.stop(),this._uiViewedEvent=null)}),(0,s.default)(this,"resetUIViewedTimers",()=>{this._uiViewedEvent&&this._uiViewedEvent.resetTimers()}),(0,s.default)(this,"startApdexEvent",e=>{this._apdexEvent.start(e)}),(0,s.default)(this,"getApdexStart",e=>this._apdexEvent.getStart(e)),(0,s.default)(this,"stopApdexEvent",(e,t)=>{this._apdexEvent.stop(e,t)}),(0,s.default)(this,"startLowPriorityEventDelay",(e,t)=>{this.eventDelayQueue.startLowPriorityEventDelay(e,t)}),(0,s.default)(this,"stopLowPriorityEventDelay",()=>{this.eventDelayQueue.stopLowPriorityEventDelay()}),(0,s.default)(this,"onEvent",(e,t)=>{if(!t)throw Error("Missing analyticsData");if(!t.eventType)throw Error("Missing analyticsData.eventType");if(t.eventType===n("hRleJ").eventType.TRACK)return this.sendTrackEvent(t);if(t.eventType===n("hRleJ").eventType.UI)return this.sendUIEvent(t);if(t.eventType===n("hRleJ").eventType.OPERATIONAL)return this.sendOperationalEvent(t);if(t.eventType===n("hRleJ").eventType.SCREEN)return this.sendScreenEvent(t.name,null,t.attributes);if(t.eventType===n("hRleJ").eventType.IDENTIFY)return this.sendIdentifyEvent(t.userIdType,t.userId);throw Error(`Invalid analyticsData.eventType '${t.eventType}', must be an eventType: [${(0,n("hRleJ").objectValues)(n("hRleJ").eventType)}]`)}),!e)throw Error("Missing productInfo");if(!e.env)throw Error("Missing productInfo.env");if(!e.product)throw Error("Missing productInfo.product");if(!(0,n("hRleJ").isType)(n("hRleJ").envType,e.env))throw Error(`Invalid productInfo.env '${e.env}', must be an envType: [${(0,n("hRleJ").objectValues)(n("hRleJ").envType)}]`);if(e.perimeter&&!(0,n("hRleJ").isType)(n("hRleJ").perimeterType,e.perimeter))throw Error(`Invalid productInfo.perimeter '${e.perimeter}', must be an perimeterType: [${(0,n("hRleJ").objectValues)(n("hRleJ").perimeterType)}]`);if(e.origin){if(!(0,n("hRleJ").isType)(n("hRleJ").originType,e.origin))throw Error(`Invalid productInfo.origin '${e.origin}', must be an originType: [${(0,n("hRleJ").objectValues)(n("hRleJ").originType)}]`)}else e.origin=n("hRleJ").originType.WEB;e.platform?(0,n("49KuO").validatePlatform)(e):e.platform=e.origin===n("hRleJ").originType.WEB?n("hRleJ").platformType.WEB:n("hRleJ").platformType.DESKTOP,this.logger=r.logger||console,this._productInfo=l(l({},e),{},{subproduct:this._createSubproductGetter(e.subproduct),embeddedProduct:this._createEmbeddedProductGetter(e.embeddedProduct)}),this._tenantInfo={},this._orgInfo={},this._uiViewedAttributes={},this._context=(0,n("bVXPQ").buildContext)(this._productInfo),this._safeSessionStorage=new(n("cxp5h")).default;let i=this._useStargate(r.useStargate),o=r.apiHost||(0,n("hrLBB").selectHost)({useStargate:i,env:e.env,useLegacyUrl:r.useLegacyUrl,perimeter:e.perimeter,envOverride:e.envOverride}),u=r.apiHostProtocol||"https",d=r.minRetryDelay||1e3,h={maxRetryDelay:6e4,minRetryDelay:d,backoffFactor:2,flushWaitMs:r.flushWaitInterval,flushBeforeUnload:r.flushBeforeUnload},p=`awc-${e.env}`,f=r.disableCookiePersistence||!1;this.eventProcessor=new(n("54lSA")).default({apiHost:o,apiHostProtocol:u,product:e.product,retryQueuePrefix:p,retryQueueOptions:h,xidPromiseGetter:()=>(0,n("l4WDe").XIDPromise)(r.xidConsent,r.xidPromiseFn),logger:this.logger,disableCookiePersistence:f}),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId(null==r?void 0:r.customAnonymousIdGenerator)},this._pageVisibility=new(n("b5Bi3")).default,this._tabTracking=new(n("kzV7m")).default,this._sessionTracking=new(n("1t0DP")).default({sessionExpiryTime:r.sessionExpiryTime,onNewSessionStarted:r.onNewSessionStarted}),this.task=new(n("6L92I")).default,this.originTracing=new(n("b88ir")).default,this._apdexEvent=new(n("9dEp1")).default(this.sendOperationalEvent,this._pageVisibility),this._historyReplaceFn="function"==typeof r.historyReplaceFn?r.historyReplaceFn:n("8TuVU").defaultHistoryReplaceFn,this.eventDelayQueue=new(n("ez3h7")).default(this._fireDelayedEvent,r.delayQueueCompressors||[]),this._testingCache=new(n("8Pilt")).default,this._pageLoadId=t(a)(),this._workspaceInfo={},this._aliases={},this._groups={}}}}),a("9dEp1",function(t,r){e(t.exports,"default",()=>o);var i=n("5zQU9");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class o{constructor(e,t){if((0,i.default)(this,"_getEventKey",({task:e,taskId:t})=>t?`${e}.${t}`:e),(0,i.default)(this,"_getEventTimingByName",e=>{let t=this._performance.getEntriesByName(e),r=t[t.length-1];return r}),(0,i.default)(this,"_getApdexFields",e=>{let t=this._getApdexTimings(e),r=this._calculateApdex({duration:t.duration,threshold:e.threshold});return a(a({},t),{},{apdex:r})}),(0,i.default)(this,"_getApdexTimings",e=>{let t=this._getEventKey(e),r=`${t}-start`,i=e.startTime||this._getStartTime(e,r),s=e.stopTime||this._getStopTime();return this._cleanApdexState(t),{startTime:i,stopTime:s,duration:s-i}}),(0,i.default)(this,"_getStartTime",(e,t)=>{let r;let i=this._performance.getTimeOrigin();if(e.type===n("hRleJ").apdexType.INITIAL_LOAD)r=i;else{let e=this._getEventTimingByName(t);r=i+e.startTime}return r}),(0,i.default)(this,"_getStopTime",()=>this._performance.getTimeOrigin()+this._performance.now()),(0,i.default)(this,"_cleanApdexState",e=>{this._performance.clearMarks(`${e}-start`),this._performance.clearMarks(`${e}-stop`),this._startedEvents.delete(e)}),(0,i.default)(this,"_getVisibilityFields",e=>{let t;if(e.type===n("hRleJ").apdexType.INITIAL_LOAD)t=!this._wasPreviouslyHidden;else if(e.type===n("hRleJ").apdexType.TRANSITION){let r=this._getEventKey(e);t=this._isActiveEvents.get(r)}return(e.startTime||e.stopTime)&&(t=!this._pageVisibility.getIsHidden()),{isActiveTab:t}}),(0,i.default)(this,"_calculateApdex",({duration:e,threshold:t=this._threshold})=>e<=t?1:e<=4*t?.5:0),(0,i.default)(this,"_validateStartEvent",e=>{if(!e)throw Error('Missing "event" in Apdex start event');if(!e.task)throw Error('Missing "task" in Apdex start event');if("string"!=typeof e.task)throw Error('Invalid "task" in Apdex start event');if(e.taskId&&"string"!=typeof e.taskId)throw Error('Invalid "taskId" in Apdex start event')}),(0,i.default)(this,"_validateStopEvent",e=>{if(!e)throw Error('Missing "event" in Apdex stop event');if(!e.task)throw Error('Missing "task" in Apdex stop event');if("string"!=typeof e.task)throw Error('Invalid "task" in Apdex stop event');if(e.taskId&&"string"!=typeof e.taskId)throw Error('Invalid "taskId" in Apdex stop event');if(!e.type)throw Error('Missing "type" in Apdex stop event');if(e.type&&!(0,n("hRleJ").isType)(n("hRleJ").apdexType,e.type))throw Error('Invalid "type" in Apdex stop event');if(e.threshold&&"number"!=typeof e.threshold)throw Error('Invalid "threshold" in Apdex stop event');if(!e.startTime&&e.type===n("hRleJ").apdexType.TRANSITION){let t=this._getEventKey(e);if(!this._startedEvents.has(t))throw Error(`Apdex event transition "${t}" was not started`)}if(e.startTime&&!("number"==typeof e.startTime&&e.startTime>=0))throw Error('Invalid "startTime" in Apdex stop event');if(e.stopTime&&"number"!=typeof e.stopTime)throw Error('Invalid "stopTime" in Apdex stop event');if(e.stopTime<=e.startTime)throw Error('"stopTime" should be greater than "startTime" in Apdex stop event')}),(0,i.default)(this,"_shouldSendEvent",e=>!!e&&"number"==typeof e.apdex),(0,i.default)(this,"_sendEvent",(e,t)=>{this._shouldSendEvent(e)&&this._onEvent({source:"ui",action:"readyForUser",actionSubject:"ui",attributes:a(a({},e.additionalAttributes),{},{task:e.task,taskId:e.taskId,type:e.type,threshold:e.threshold||this._threshold,apdex:e.apdex,startTime:e.startTime,stopTime:e.stopTime,duration:e.duration,isActiveTab:e.isActiveTab})},t)}),!e)throw Error("Missing onEvent callback");if("function"!=typeof e)throw Error("Invalid onEvent, must be function");if(!(t instanceof n("b5Bi3").default))throw Error("Invalid pageVisibility, must be PageVisibility class");this._startedEvents=new Map,this._performance=new(n("hTk3G")).default,this._onEvent=e,this._threshold=1e3,this._wasPreviouslyHidden=t.getIsHidden(),this._isActiveEvents=new Map,this._pageVisibility=t,this._pageVisibility.addCallback("apdexEvent",e=>{this.onVisibilityChange(!e)})}start(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;let t=this._getEventKey(e),r=`${t}-start`;this._startedEvents.set(t,!0),this._isActiveEvents.set(t,!this._pageVisibility.getIsHidden()),this._performance.clearMarks(r),this._performance.mark(r)}getStart(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;let t=this._getEventKey(e),r=`${t}-start`;return this._getEventTimingByName(r)}stop(e,t){if(this._validateStopEvent(e),!this._performance.isAvailable())return;let r=this._getApdexFields(e),i=this._getVisibilityFields(e);this._sendEvent(a(a(a({},e),r),i),t)}onVisibilityChange(e){e||(this._wasPreviouslyHidden=!0,Array.from(this._isActiveEvents.keys()).forEach(e=>this._isActiveEvents.set(e,!1)))}}}),a("b5Bi3",function(t,r){e(t.exports,"default",()=>s);var i=n("5zQU9");class s{constructor(){(0,i.default)(this,"_bindEventListeners",()=>{document.addEventListener(this._visibilityChange,this._handleVisibilityChange,!1)}),(0,i.default)(this,"_handleVisibilityChange",()=>{let e=document[this._hidden];this._isHidden=e,this._callbacks.forEach(t=>t(e))}),this._isHidden=!1,this._callbacks=new Map,this._hidden=void 0,this._visibilityChange=void 0,"undefined"!=typeof document&&(void 0!==document.hidden?(this._isHidden=document.hidden,this._hidden="hidden",this._visibilityChange="visibilitychange"):void 0!==document.msHidden?(this._isHidden=document.msHidden,this._hidden="msHidden",this._visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this._isHidden=document.webkitHidden,this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==this._hidden&&this._bindEventListeners())}addCallback(e,t){if("string"!=typeof e)throw Error("Invalid name, must be string");if("function"!=typeof t)throw Error("Invalid callback, must be function");this._callbacks.set(e,t)}removeCallback(e){this._callbacks.has(e)&&this._callbacks.delete(e)}getIsHidden(){return this._isHidden}}}),a("hTk3G",function(t,r){e(t.exports,"default",()=>i);class i{constructor(){this._performance=window.performance}clearMarks(...e){this._performance&&this._performance.clearMarks&&this._performance.clearMarks(...e)}mark(...e){this._performance&&this._performance.mark&&this._performance.mark(...e)}getEntriesByName(...e){return this._performance&&this._performance.getEntriesByName?this._performance.getEntriesByName(...e):[]}getTimeOrigin(){return this._performance&&(this._performance.timeOrigin||this._performance.timing)?this._performance.timeOrigin||this._performance.timing.navigationStart:0}now(){return this._performance&&this._performance.now?this._performance.now():Date.now?Date.now():+new Date}isAvailable(){return!!this._performance&&!!this._performance.clearMarks&&!!this._performance.mark&&!!this._performance.getEntriesByName&&!!this._performance.timing}}}),a("eIGW7",function(t,r){e(t.exports,"default",()=>s);let i=e=>"function"==typeof e;var s=(e,t)=>()=>{if(i(e))try{return e()}catch(e){console.error(`${t} - ${e instanceof Error?e.message:String(e)}`);return}return e}}),a("bVXPQ",function(t,r){e(t.exports,"buildActionFields",()=>b),e(t.exports,"buildScreenEvent",()=>E),e(t.exports,"buildActionName",()=>I),e(t.exports,"buildContext",()=>O),e(t.exports,"buildActionEvent",()=>w);var i=n("5zQU9");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e){return{tenantIdType:e.tenantIdType,tenantId:e.tenantId}}function l(e){return{userIdType:e.userIdType}}function c(e){return{orgId:e.orgId}}function u(e){return{workspaceId:e.workspaceId}}function d(e){if(g(e))return{aliases:e}}function h(e){if(g(e))return{groups:e}}function p(e){return e.anonymousId?{anonymousId:e.anonymousId}:{}}function f(e,t){return void 0===t?e:t}function m(e,t){let r=t||{},i=f(e.env,r.env),s=f(e.product,r.product),n=f(e.subproduct(),r.subproduct),a=f(e.version,r.version),o=f(e.origin,r.origin),l=f(e.platform,r.platform);return{env:i,product:s,subproduct:n,version:a,origin:o,platform:l}}function g(e){return(0,n("f6ddt").isPlainObject)(e)&&Object.keys(e).length>0}function y(e,t){return g(t)?{[e]:t}:void 0}function v(e){if(g(e)){let t=function(e){let t={};return Object.keys(e).forEach(r=>{let i=e[r];t[r]={id:i.id,type:i.type}}),t}(e);return y("containers",t)}}function b(e,t){return a({containerType:e.containerType,containerId:e.containerId,source:e.source,objectType:e.objectType,objectId:e.objectId,actionSubject:e.actionSubject,action:e.action,actionSubjectId:e.actionSubjectId,attributes:e.attributes,nonPrivacySafeAttributes:e.nonPrivacySafeAttributes,tags:e.tags,highPriority:e.highPriority,eventType:t},v(e.containers))}function E(e,t,r,i,s,f,g,b,E,I,O,w,T,S,_,A){let P=m(e),x=o(t),k=l(r),D=c(I),C=u(w),R={title:"",path:"",url:"",referrer:"",search:"",eventType:n("hRleJ").eventType.SCREEN};return a(a(a(a(a(a(a(a(a(a(a(a({},P),x),k),D),R),y("attributes",i)),y("nonPrivacySafeAttributes",s)),v(S)),p(T)),{},{tags:f,tabId:g,sessionId:b,taskSessions:E,pageLoadId:O},C),d(_)),h(A))}function I(e){return`${e.actionSubject} ${e.action}`}function O(e){let t=window.screen||{};return{context:{locale:e.locale,screen:{width:t.width,height:t.height,density:window.devicePixelRatio},library:{name:"analytics.js",version:"4.22.0"}}}}function w(e,t,r,i,s,n,f,g,y,v,E,I,O){let w=m(e,function(e){let{env:t,product:r,subproduct:i,version:s,origin:n,platform:a}=e;return{env:t,product:r,subproduct:i,version:s,origin:n,platform:a}}(i)),T=o(t),S=c(y),_=u(E),A=l(r),P=b(i,s);return a(a(a(a(a(a(a(a(a({},w),T),S),A),P),p(i)),{},{tabId:n,sessionId:f,taskSessions:g,pageLoadId:v},_),d(I)),h(O))}}),a("ez3h7",function(t,r){e(t.exports,"default",()=>s);var i=n("5zQU9");class s{constructor(e,t){(0,i.default)(this,"push",(e,t,r,i)=>{this.delayQueue.push(e,t,r,i)}),(0,i.default)(this,"startLowPriorityEventDelay",(e=l,t)=>{if(Number.isNaN(e)||e<=0)throw Error(`Invalid timeout period: ${e}, must be a number greater than 0`);this.delayTimeout&&clearTimeout(this.delayTimeout),this.delayCallback=t,this.delayTimeout=setTimeout(()=>this.stopLowPriorityEventDelay(n("38XXT").StopLowPriorityEventDelayReason.TIMEOUT),e?Math.min(e,c):c),this.delayQueue.cancelFlush(),this.isDelaying=!0}),(0,i.default)(this,"stopLowPriorityEventDelay",(e=n("38XXT").StopLowPriorityEventDelayReason.MANUAL)=>{var t;this.delayTimeout&&(clearTimeout(this.delayTimeout),this.delayTimeout=void 0),this.delayQueue.startFlush(),this.isDelaying=!1,null===(t=this.delayCallback)||void 0===t||t.call(this,e),this.delayCallback=void 0}),(0,i.default)(this,"isDelayingLowPriorityEvents",()=>this.isDelaying),this.isDelaying=!1,this.delayQueue=new(n("2PfP0")).default(e,t)}}});const l=1e4,c=3e4;a("2PfP0",function(t,r){e(t.exports,"default",()=>s);var i=n("5zQU9");class s{constructor(e,t){(0,i.default)(this,"push",(e,t,r,i)=>{this.eventArgs.push({identifier:e,builtEvent:t,context:r,userInfo:i})}),(0,i.default)(this,"size",()=>this.eventArgs.length),(0,i.default)(this,"startFlush",()=>{try{this.eventArgs=this.compressEventArgs(this.eventArgs)}catch(e){console.warn(`Failed to perform compression on the delayed analytics events. Error: ${e.message}. Sending ${this.eventArgs.length} uncompressed events instead`)}this.flushNextBatch()}),(0,i.default)(this,"cancelFlush",()=>{this.flushBatchTimeout&&(clearTimeout(this.flushBatchTimeout),this.flushBatchTimeout=null)}),(0,i.default)(this,"flushNextBatch",()=>{let e=this.eventArgs.splice(0,7);e.forEach(e=>this.processFn(e.identifier,e.builtEvent,e.context,e.userInfo)),this.eventArgs.length>0?this.flushBatchTimeout=setTimeout(()=>this.flushNextBatch(),100):this.flushBatchTimeout=null}),(0,i.default)(this,"compressEventArgs",e=>{let[t,r]=(0,n("eaJEm").partition)(e,e=>this.compressor.canCompress(e.builtEvent)),i=t.reduce((e,t)=>{let r=e.find(e=>(0,n("eaJEm").equals)(e.userInfo,t.userInfo)&&(0,n("eaJEm").equals)(e.context,t.context));return r?r.eventArgs.push(t):e.push({userInfo:t.userInfo,context:t.context,eventArgs:[t]}),e},[]),s=i.reduce((e,t)=>{try{let r=t.eventArgs.map(e=>e.builtEvent),i=this.compressor.compress(r),s=i.map(e=>({identifier:(0,n("bVXPQ").buildActionName)(e),builtEvent:e,userInfo:t.userInfo,context:t.context}));return e.concat(s)}catch(e){return console.warn(`Failed to compress some analytics events. Error: ${e.message}. Sending ${t.eventArgs.length} uncompressed events instead`),t.eventArgs}},[]);return r.forEach(e=>s.push(e)),s}),this.processFn=e,this.flushBatchTimeout=null,this.eventArgs=[],this.compressor=new(n("jvSgy")).default(t)}}}),a("jvSgy",function(t,r){e(t.exports,"default",()=>o);var i=n("5zQU9");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class o{constructor(e=[]){if((0,i.default)(this,"canCompress",e=>this.compressionRules.some(t=>t.canCompress(e))),(0,i.default)(this,"compress",e=>{let t=this.createGroups(e);return t.reduce((e,t)=>{let r=this.compressGroup(t);return e.concat(r)},[])}),(0,i.default)(this,"createGroups",e=>e.reduce((e,t)=>{let r;let i=this.compressionRules.find(e=>e.canCompress(t));if(i){let e=(0,n("bVXPQ").buildActionFields)(t,t.eventType);r=(0,n("eaJEm").omit)(t,Object.keys(e))}let s=e.find(e=>i===e.compressor&&(0,n("eaJEm").equals)(r,e.contextFields));return s?s.events.push(t):e.push({contextFields:r,compressor:i,events:[t]}),e},[])),(0,i.default)(this,"compressGroup",e=>{if(!e.compressor)return e.events;try{let t=e.compressor.compress(e.events);return t.map(t=>a(a({},t),e.contextFields))}catch(t){return console.warn(`Failed to compress some analytics events. Error: ${t.message}. Sending ${e.events.length} uncompressed events instead`),e.events}}),!Array.isArray(e))throw Error("Event compressors must be constructed with an array of CompressionRules");if(!e.every(e=>e instanceof n("gmPP3").CompressionRule))throw Error("Event compressors can only be constructed with instances of CompressionRule");this.compressionRules=e}}}),a("38XXT",function(t,r){var i;e(t.exports,"StopLowPriorityEventDelayReason",()=>s);let s=((i={}).TIMEOUT="timeout",i.MANUAL="manual",i)}),a("54lSA",function(r,i){e(r.exports,"default",()=>c);var s=n("5zQU9"),a=n("dFBS3");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class c{constructor(e){var t;(0,s.default)(this,"sendEvents",async(e,t)=>{let r=this.resilienceQueue.getGlobalRetryCount(),i=this.metrics.getMetricsPayload(),s=l(l({},i),{},{httpRetryCount:r});for(let e in s)0===s[e]&&delete s[e];let a=await this.attachXIDs(e),o=new Date().toISOString(),c=a.map(e=>(e.msg.sentAt=o,e.msg));try{let e=await (0,n("bpctN").sendEvents)({url:this.gasv3BatchUrl,batch:{batch:c,sentAt:o,metadata:s},timeout:this.options.requestTimeout});this.metrics.subtractFromMetrics(i),t(null,e)}catch(e){t(e,null)}}),this.options=l(l({},e),{},{requestTimeout:e.requestTimeout||n("dhCt2").DEFAULT_REQUEST_TIMEOUT,retryQueueOptions:e.retryQueueOptions||{},logger:e.logger||console,disableCookiePersistence:e.disableCookiePersistence||!1}),this.user=new(n("5UpLh")).default(null===(t=this.options)||void 0===t?void 0:t.disableCookiePersistence),this.xidPromiseCallback=e.xidPromiseGetter(),this.gasv3BatchUrl=`${e.apiHostProtocol}://${e.apiHost}/batch`,this.metrics=(0,n("j1fnp").default)(),this.resilienceQueue=(0,n("6WYmo").default)(e.retryQueuePrefix,e.product,this.options.retryQueueOptions,this.options.logger),this.resilienceQueue.start(this.sendEvents)}getUser(){return this.user}async track(e,t,r,i){let s=this.buildBaseEvent(r,n("6gNKz").SegmentEventTypes.TRACK,t),a=l(l({},s),{},{type:n("6gNKz").SegmentEventTypes.TRACK,properties:(0,n("kPI67").prepareEventProperties)(t),event:e}),o=l(l({},a),{},{messageId:this.createMessageId()}),c=this.packageEvent(o);await this.resilienceQueue.addItem(c),i&&i()}async page(e,t,r,i){let s=this.buildBaseEvent(r,n("6gNKz").SegmentEventTypes.PAGE,t),a=l(l({},s),{},{type:n("6gNKz").SegmentEventTypes.PAGE,properties:(0,n("kPI67").prepareEventProperties)(t),name:e}),o=l(l({},a),{},{messageId:this.createMessageId()}),c=this.packageEvent(o);await this.resilienceQueue.addItem(c),i&&i()}async identify(e,t,r,i){let s=this.buildBaseEvent(r,n("6gNKz").SegmentEventTypes.IDENTIFY,t),a=l(l({},s),{},{type:n("6gNKz").SegmentEventTypes.IDENTIFY,traits:(0,n("kPI67").prepareEventProperties)(t)}),o=l(l({},a),{},{messageId:this.createMessageId()}),c=this.packageEvent(o);await this.resilienceQueue.addItem(c),i&&i()}buildBaseEvent(e,t,r){let i=(0,n("kPI67").prepareEventProperties)(e),s=(0,n("kPI67").buildContext)(i);return{context:s,timestamp:new Date().toISOString(),type:t,userId:this.user.getUserId(),anonymousId:r.anonymousId||this.user.getAnonymousId()}}createMessageId(){return`ajs-${t(a)()}`}packageEvent(e){let{apiHost:t,apiHostProtocol:r}=this.options;return{headers:{"Content-Type":"text/plain"},msg:e,url:`${r}://${t}/${e.type.charAt(0)}`}}async attachXIDs(e){return this.xidPromiseCallback?(0,n("buuYU").attachXidToMultipleEvents)(e,this.xidPromiseCallback):Promise.resolve(e)}}}),a("6WYmo",function(t,r){e(t.exports,"default",()=>i);var i=(e,t,r,i)=>new(n("iIK97")).default(e,t,r||{},i)}),a("iIK97",function(t,r){e(t.exports,"default",()=>c);var i=n("5zQU9");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let o={backoffFactor:0,backoffJitterPercentage:0,flushWaitMs:6e4,minRetryDelay:6e4,maxRetryDelay:6e4},l={backoffFactor:2,backoffJitterPercentage:.2,batchFlushSize:7,flushBeforeUnload:!1,flushWaitMs:500,maxAttempts:10,maxItems:1e3,maxRetryDelay:3e4,minRetryDelay:1e3};class c{constructor(e,t,r,i){this.queuePrefix=e,this.resilience=new(n("IlgzD")).default(t,{logger:i,maxAttempts:null==r?void 0:r.maxAttempts,maxEventLimit:null==r?void 0:r.maxItems}),this.options=this.buildOptions(r),this.scheduler=new(n("9XgvA")).default(a(a({},this.options),{},{waitInterval:null!=r&&r.flushBeforeUnload?0:this.options.flushWaitMs}),this.scheduleCallback.bind(this)),this.longPollingScheduler=new(n("9XgvA")).default(a(a({},o),{},{waitInterval:o.flushWaitMs}),this.scheduleLongCallBack.bind(this)),this.metricsCollector=(0,n("j1fnp").default)(),this.networkStatus=new(n("4g0Nt")).default(e=>{e===n("hObqm").NetworkStatusEnum.OFFLINE?this.scheduler.stop():this.checkEventCountAndReschedule()})}start(e){this.batchFlushCallback=e,this.longPollingScheduler.schedule()}stop(){this.scheduler.stop(),this.longPollingScheduler.stop()}async addItem(e){let t=JSON.parse(JSON.stringify(e)),{numberOfEvictedItems:r}=await this.resilience.addItem(t,{},n("gKFhB").GuardPolicy.EVICT);this.scheduler.schedule(),this.metricsCollector.addToEventCount(),r>0&&this.metricsCollector.addToItemsDiscardedByOverflowCounter(r)}getGlobalRetryCount(){return this.scheduler.getFailureCount()}async scheduleCallback(e){if(this.networkStatus.getNetworkStatus()===n("hObqm").NetworkStatusEnum.OFFLINE){e(n("feAgz").DoneState.NOOP);return}try{let t=await this.resilience.processItems(this.flush.bind(this),this.options.batchFlushSize);e(t)}catch(t){if(t.name===n("dJ5oQ").CallbackProcessingErrorName){e(n("feAgz").DoneState.ERROR);return}}finally{await this.checkEventCountAndReschedule()}}async checkEventCountAndReschedule(){let e=await this.resilience.getItemCount();e>0&&this.scheduler.schedule({immediate:e>=this.options.batchFlushSize})}async scheduleLongCallBack(e){let t=(0,n("bR5nb").default)(this.queuePrefix);this.metricsCollector.addToPurgedQueuesMetrics(t);let r=await (0,n("beet7").default)(this.queuePrefix,async e=>{let t=e.map(e=>({item:e.item,retryAttempts:e.attemptNumber,id:e.id})),{items:r}=await this.resilience.bulkAddItem(t,n("gKFhB").GuardPolicy.IGNORE);return r.length===t.length?{status:"successful"}:{status:"partial",acceptedItemIds:r.map(e=>e.id)}});this.metricsCollector.addToReclaimMetrics(r),await this.checkEventCountAndReschedule(),e(n("feAgz").DoneState.SUCCESS),this.longPollingScheduler.schedule()}flush(e,t){this.metricsCollector.setResilienceMechanism(this.resilience.storeType());let{batchFlushCallback:r}=this;if(!r)throw Error("batchFlushCallback has not been set. Call PullBatchableQueue#start first.");return new Promise((i,s)=>{if(e.length<=0){i(n("feAgz").DoneState.NOOP);return}let a=e.map(e=>{let t=e.item;return e.retryAttempts>0&&t.msg&&(t.msg._metadata||(t.msg._metadata={}),t.msg._metadata.failedAttempts=e.retryAttempts),t});r(a,e=>{e?(t.numberOfDeletedItems>0&&this.metricsCollector.addToItemsDiscardedByRetryCounter(t.numberOfDeletedItems),s(e)):i(n("feAgz").DoneState.SUCCESS)})})}buildOptions(e){return{backoffFactor:(null==e?void 0:e.backoffFactor)||l.backoffFactor,backoffJitterPercentage:(null==e?void 0:e.backoffJitterPercentage)!==void 0?e.backoffJitterPercentage:l.backoffJitterPercentage,batchFlushSize:(null==e?void 0:e.batchFlushSize)||l.batchFlushSize,flushBeforeUnload:(null==e?void 0:e.flushBeforeUnload)||l.flushBeforeUnload,flushWaitMs:(null==e?void 0:e.flushWaitMs)||l.flushWaitMs,maxItems:(null==e?void 0:e.maxItems)||l.maxItems,maxAttempts:(null==e?void 0:e.maxAttempts)||l.maxAttempts,maxRetryDelay:(null==e?void 0:e.maxRetryDelay)||l.maxRetryDelay,minRetryDelay:(null==e?void 0:e.minRetryDelay)||l.minRetryDelay}}}}),a("bR5nb",function(t,r){e(t.exports,"default",()=>s);let i=Object.values(n("4RWKr").LocalStorageKeySuffix);var s=e=>{if("string"!=typeof e||0===e.length)return 0;try{let t=Object.keys(localStorage).filter(t=>t&&t.startsWith(`${e}.`)||!1).map(e=>e.split(".")).filter(e=>3===e.length&&i.includes(e[2])).reduce((e,t)=>{let[,r,i]=t;return void 0===e[r]&&(e[r]={}),e[r][i]=!0,e},{}),r=Object.keys(t).filter(e=>!0!==t[e][n("4RWKr").LocalStorageKeySuffix.ACK]);return r.forEach(t=>{let{queue:r,inProgress:i,reclaimStart:s,reclaimEnd:a}=(0,n("eACNI").createLocalStorageKeys)(e,t);localStorage.removeItem(i),localStorage.removeItem(r),localStorage.removeItem(s),localStorage.removeItem(a)}),r.length}catch(e){}return 0}}),a("4RWKr",function(t,r){var i,s;e(t.exports,"LocalStorageKeySuffix",()=>n),e(t.exports,"Timers",()=>a);let n=((i={}).IN_PROGRESS="inProgress",i.QUEUE="queue",i.RECLAIM_START="reclaimStart",i.RECLAIM_END="reclaimEnd",i.ACK="ack",i),a=((s={})[s.RECLAIM_TIMEOUT=1e4]="RECLAIM_TIMEOUT",s[s.RECLAIM_WAIT=500]="RECLAIM_WAIT",s[s.RECLAIM_WAIT_THRESHOLD=2e3]="RECLAIM_WAIT_THRESHOLD",s)}),a("eACNI",function(t,r){e(t.exports,"createLocalStorageKeys",()=>i);let i=(e,t)=>({[n("4RWKr").LocalStorageKeySuffix.ACK]:`${e}.${t}.${n("4RWKr").LocalStorageKeySuffix.ACK}`,[n("4RWKr").LocalStorageKeySuffix.QUEUE]:`${e}.${t}.${n("4RWKr").LocalStorageKeySuffix.QUEUE}`,[n("4RWKr").LocalStorageKeySuffix.IN_PROGRESS]:`${e}.${t}.${n("4RWKr").LocalStorageKeySuffix.IN_PROGRESS}`,[n("4RWKr").LocalStorageKeySuffix.RECLAIM_START]:`${e}.${t}.${n("4RWKr").LocalStorageKeySuffix.RECLAIM_START}`,[n("4RWKr").LocalStorageKeySuffix.RECLAIM_END]:`${e}.${t}.${n("4RWKr").LocalStorageKeySuffix.RECLAIM_END}`})}),a("beet7",function(r,i){e(r.exports,"default",()=>f);var s=n("5zQU9"),a=n("dFBS3");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let c=e=>new Promise(t=>{setTimeout(t,e)}),u=e=>{try{return Object.keys(localStorage).filter(t=>t.startsWith(e)).map(e=>e.split(".")).filter(t=>{if(3===t.length&&t[0]===e&&t[2]===n("4RWKr").LocalStorageKeySuffix.ACK)try{let e=localStorage.getItem(t.join("."));if(e){let t=parseInt(e);return n("4RWKr").Timers.RECLAIM_TIMEOUT+t<Date.now()}}catch(e){}return!1}).map(e=>e[1])}catch(e){}return[]},d=async(e,t)=>{let{ack:r,reclaimStart:i,reclaimEnd:s}=e.storageKeys,a=Date.now();if(localStorage.setItem(i,e.reclaimProcessId),localStorage.setItem(r,a.toString()),await c(n("4RWKr").Timers.RECLAIM_WAIT),Date.now()>a+n("4RWKr").Timers.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(i)!==e.reclaimProcessId)throw Error("Took to long to callback, reclaim abandonded. After reclaimStart.");if(localStorage.setItem(s,e.reclaimProcessId),await c(n("4RWKr").Timers.RECLAIM_WAIT),Date.now()>a+n("4RWKr").Timers.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(i)!==e.reclaimProcessId||localStorage.getItem(s)!==e.reclaimProcessId)throw Error("Took to long to callback, reclaim abandonded. After reclaimEnd.");return h(e,t)},h=async(e,t)=>{let{queue:r,inProgress:i}=e.storageKeys,s=JSON.parse(localStorage.getItem(r)||"[]"),n=JSON.parse(localStorage.getItem(i)||"{}"),a=Object.entries(n).map(([e,t])=>{let r=l(l({},t),{},{attemptNumber:t.attemptNumber+1,id:e});return r}),o=[...s,...a];if(o.length>0){let s=await t(o);if("successful"===s.status)p(e.storageKeys);else if("partial"===s.status){let e=o.filter(e=>!s.acceptedItemIds.includes(e.id));return localStorage.removeItem(i),localStorage.setItem(r,JSON.stringify(e)),{fullReclaim:!1}}}else p(e.storageKeys);return{fullReclaim:!0}},p=e=>{localStorage.removeItem(e.queue),localStorage.removeItem(e.inProgress),localStorage.removeItem(e.reclaimEnd),localStorage.removeItem(e.reclaimStart),localStorage.removeItem(e.ack)};var f=async(e,r)=>{if("string"!=typeof e||0===e.length)return{fullReclaims:0,partialReclaims:0,failedReclaims:0};let i=t(a)(),s=u(e),o=s.map(t=>d({queuePrefix:e,reclaimProcessId:i,storageKeys:(0,n("eACNI").createLocalStorageKeys)(e,t)},r)),l=await Promise.allSettled(o),c=l.filter(e=>"rejected"===e.status),h=l.filter(e=>"fulfilled"===e.status).map(e=>e.value),p=h.filter(e=>e.fullReclaim),f=h.filter(e=>!e.fullReclaim);return{failedReclaims:c.length,partialReclaims:f.length,fullReclaims:p.length}}}),a("dJ5oQ",function(t,r){e(t.exports,"CallbackProcessingErrorName",()=>i),e(t.exports,"default",()=>s);let i="CallbackProcessingError";class s extends Error{constructor(e){let t=e&&"object"==typeof e&&"toString"in e&&"function"==typeof e.toString&&e.toString(),r=t||"string"==typeof e&&e||"Argument passed to CallbackProcessingError was not an Error or string.";super(`Error thrown while processing events in callback: ${r}`),Object.setPrototypeOf(this,s.prototype),this.name=i}}}),a("IlgzD",function(t,r){e(t.exports,"default",()=>i);var i=n("kI8Xv").default}),a("kI8Xv",function(t,r){e(t.exports,"default",()=>i);class i{constructor(e,t={}){if(this.namespace=e,this.options=(0,n("20tEp").createOptionsWithDefaults)(t),!e||0===e.length||"string"!=typeof e)throw Error("Invalid namespace provided");this.resilience=this.getResilienceMechanism(e,t)}getResilienceMechanism(e,t){if(!t.useMemory)try{return new(n("eY6Jo")).default(e,t)}catch(e){if(!(e instanceof n("8i80Y").default)){var r;null===(r=t.logger)||void 0===r||r.warn("Attempted to create IndexedDbResilience but failed. Using memory instead.")}}return new(n("9vF9y")).default(this.namespace,t)}addItem(e,t,r=n("gKFhB").GuardPolicy.ABANDON){return this.runOrFailOver(()=>this.resilience.addItem(e,t,r))}bulkAddItem(e,t=n("gKFhB").GuardPolicy.ABANDON){return this.runOrFailOver(()=>this.resilience.bulkAddItem(e,t))}getItems(e){return this.runOrFailOver(()=>this.resilience.getItems(e))}deleteItems(e){return this.runOrFailOver(()=>this.resilience.deleteItems(e))}getItemCount(){return this.runOrFailOver(()=>this.resilience.getItemCount())}processItems(e,t){return this.runOrFailOver(()=>this.resilience.processItems(e,t))}storeType(){return this.resilience.storeType()}async runOrFailOver(e){try{return await e()}catch(t){if((0,n("aI6sO").shouldIgnoreResilienceDbError)(t))throw t;return this.resilience.storeType()===n("gKFhB").StoreType.INDEXEDDB&&await this.failOver(),e()}}async failOver(){let e=this.resilience,t=new(n("9vF9y")).default(this.namespace,this.options);this.resilience=t;try{let{items:r}=await e.getItems(this.options.maxEventLimit);if(r.length>0){let i=await t.bulkAddItemWrapperType(r,n("gKFhB").GuardPolicy.IGNORE),s=i.items.map(e=>e.id);await e.deleteItems(s)}}catch(e){this.options.logger.warn("Unexpected error from ResilienceDb, switching to MemoryDb")}}}}),a("gKFhB",function(t,r){var i,s;e(t.exports,"NAMESPACE_AND_TIME_ADDED_INDEX",()=>n),e(t.exports,"RESILIENCE_DB_NAME",()=>a),e(t.exports,"RESILIENCE_STORE_NAME",()=>o),e(t.exports,"TIME_TO_PROCESS_AFTER_INDEX",()=>l),e(t.exports,"TIME_ADDED_INDEX",()=>c),e(t.exports,"RETRY_INDEX",()=>u),e(t.exports,"INDEXEDDB_TIMEOUT",()=>d),e(t.exports,"StoreType",()=>h),e(t.exports,"GuardPolicy",()=>p);let n="namespace-timeAdded",a="analytics-web-client",o="analytics-resilience",l="timeToBeProcessedAfter",c="timeAdded",u="retryAttempts",d=15e3,h=((i={}).INDEXEDDB="indexeddb",i.MEMORY="memory",i),p=((s={}).IGNORE="ignore",s.ABANDON="abandon",s.EVICT="evict",s)}),a("8i80Y",function(t,r){e(t.exports,"default",()=>i);class i extends Error{constructor(){super("window.indexeddb is undefined."),Object.setPrototypeOf(this,i.prototype),this.name="NoIndexedDbError"}}}),a("aI6sO",function(t,r){e(t.exports,"shouldIgnoreResilienceDbError",()=>i);let i=e=>!!e&&"object"==typeof e&&"name"in e&&"string"==typeof e.name&&(e.name===n("cjuzB").AbandonWriteErrorName||e.name===n("dJ5oQ").CallbackProcessingErrorName||e.name===n("fFUMz").InvalidPolicyErrorName)}),a("cjuzB",function(t,r){e(t.exports,"AbandonWriteErrorName",()=>i),e(t.exports,"default",()=>s);let i="AbandonWriteError";class s extends Error{constructor(e){super(`Event Limit reached. Abandoning write to: ${e}`),Object.setPrototypeOf(this,s.prototype),this.name=i}}}),a("fFUMz",function(t,r){e(t.exports,"InvalidPolicyErrorName",()=>i),e(t.exports,"default",()=>s);let i="InvalidPolicyError";class s extends Error{constructor(e,t){super(`Method '${t}' cannot be called with policy '${e}'.`),this.name=i}}}),a("eY6Jo",function(t,r){e(t.exports,"default",()=>c);var i=n("bwPfh"),s=n("5zQU9");let a=["item"],o=["items"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}class c{constructor(e,t={}){if((0,s.default)(this,"startDB",async()=>new Promise(async(e,t)=>{if("undefined"!=typeof window){window.setTimeout(()=>{this.logger.warn("IndexedDB timed out."),t(new(n("8i80Y")).default)},n("gKFhB").INDEXEDDB_TIMEOUT);let r=window.indexedDB.open(n("gKFhB").RESILIENCE_DB_NAME,1);r.onupgradeneeded=e=>{if(0!==e.oldVersion)throw Error("We cannot upgrade the database. Do not do this.");let t=r.result,i=t.createObjectStore(n("gKFhB").RESILIENCE_STORE_NAME,{keyPath:"id"});i.createIndex(n("gKFhB").TIME_TO_PROCESS_AFTER_INDEX,n("gKFhB").TIME_TO_PROCESS_AFTER_INDEX,{unique:!1}),i.createIndex(n("gKFhB").RETRY_INDEX,n("gKFhB").RETRY_INDEX,{unique:!1}),i.createIndex(n("gKFhB").TIME_ADDED_INDEX,n("gKFhB").TIME_ADDED_INDEX,{unique:!1}),i.createIndex(n("gKFhB").NAMESPACE_AND_TIME_ADDED_INDEX,["namespace","timeAdded"],{unique:!1})};try{return await (0,n("20tEp").requestToPromise)(r),e(r.result)}catch(e){this.logger.warn("IndexedDB failed to initialise.",e),t(new(n("8i80Y")).default)}}})),(0,s.default)(this,"addItem",async(e,t={},r=n("gKFhB").GuardPolicy.ABANDON)=>{let{logger:i,namespace:s}=this,a=(0,n("20tEp").convertToItemWrapper)(e,s,t),{objectStore:o}=await this.getObjectStoreAndTransaction("readwrite");if(r===n("gKFhB").GuardPolicy.IGNORE)throw new(n("fFUMz")).default(r,"IndexedDbConnector#addItem");try{if(!a.namespace||0===a.namespace.length||"string"!=typeof a.namespace)throw Error("Namespace not specified");let e=await this.globalEventLimitGuard.insertItems(o,[a],r);if(1===e.items.length)return{item:e.items[0],numberOfEvictedItems:e.numberOfEvictedItems};throw Error(`Incorrect number of items added. Expected: 1, got: ${e.items.length}`)}catch(e){if((0,n("aI6sO").shouldIgnoreResilienceDbError)(e))throw e;throw i.log("Failed to add item to table",e),Error("Request to add item to table failed")}}),(0,s.default)(this,"bulkAddItem",async(e,t=n("gKFhB").GuardPolicy.ABANDON)=>{let{logger:r,namespace:s}=this,o=e.map(e=>{let{item:t}=e,r=(0,i.default)(e,a);return(0,n("20tEp").convertToItemWrapper)(t,s,r)}),{objectStore:l}=await this.getObjectStoreAndTransaction("readwrite");try{return await this.globalEventLimitGuard.insertItems(l,o,t)}catch(e){if((0,n("aI6sO").shouldIgnoreResilienceDbError)(e))throw e;throw r.log("Failed to add item to table",e),Error("Request to add item to table failed")}}),(0,s.default)(this,"getItems",async(e=n("1vRDG").GET_ITEM_COUNT)=>{let t=e>0?e:n("1vRDG").GET_ITEM_COUNT,{logger:r}=this,i=this.options.maxAttempts,{transaction:a,objectStore:o}=await this.getObjectStoreAndTransaction("readwrite"),c=o.index(n("gKFhB").TIME_TO_PROCESS_AFTER_INDEX),u=IDBKeyRange.upperBound(Date.now()),d=c.openCursor(u),h=await new Promise(async(e,a)=>{let o=[],c=0;d.onerror=e=>{r.error("Failed to open cursor:",e),a("Failed to open cursor")},d.onsuccess=a=>{let u=a.target.result;if(u){let a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},u.value);o.push(a);let d=u.value;if(d.retryAttempts+=1,d.timeToBeProcessedAfter=Date.now()+n("1vRDG").VISIBILITY_TIMEOUT,d.retryAttempts>=i){++c;let e=u.delete();(0,n("20tEp").monitorErrorsOnRequest)(e,r)}else{let e=u.update(d);(0,n("20tEp").monitorErrorsOnRequest)(e,r)}o.length<t?u.continue():e({items:o,numberOfDeletedItems:c})}else e({items:o,numberOfDeletedItems:c})}});return await (0,n("20tEp").commitTransaction)(a,this.logger),h}),(0,s.default)(this,"deleteItems",async e=>{let{transaction:t,objectStore:r}=await this.getObjectStoreAndTransaction("readwrite");try{let i=e.map(e=>this.deleteItem(r,e));await (0,n("20tEp").commitTransaction)(t,this.logger),await Promise.all(i)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}}),(0,s.default)(this,"getItemCount",async()=>{let{transaction:e,objectStore:t}=await this.getObjectStoreAndTransaction("readonly"),r=t.index(n("gKFhB").TIME_TO_PROCESS_AFTER_INDEX),i=IDBKeyRange.upperBound(Date.now()),s=r.count(i),a=await (0,n("20tEp").requestToPromise)(s);return await (0,n("20tEp").commitTransaction)(e,this.logger),a.target.result}),(0,s.default)(this,"processItems",async(e,t=n("1vRDG").GET_ITEM_COUNT)=>{let r=await this.getItems(t),{items:s}=r,a=(0,i.default)(r,o);try{let t=await e(s,a),r=s.map(e=>e.id);return await this.deleteItems(r),t}catch(e){throw new(n("dJ5oQ")).default(e)}}),(0,s.default)(this,"deleteItem",async(e,t)=>{let{logger:r}=this;try{await (0,n("20tEp").requestToPromise)(e.delete(t))}catch(e){throw r.error("Failed to delete item:",t,e),e}}),(0,s.default)(this,"getObjectStoreAndTransaction",async e=>{let t=(await this.db).transaction(n("gKFhB").RESILIENCE_STORE_NAME,e),r=t.objectStore(n("gKFhB").RESILIENCE_STORE_NAME);return{transaction:t,objectStore:r}}),this.options=(0,n("20tEp").createOptionsWithDefaults)(t),this.namespace=e,this.logger=this.options.logger,!window.indexedDB)throw new(n("8i80Y")).default;this.db=this.startDB(),this.db.catch(()=>{}),this.globalEventLimitGuard=new(n("iyV9N")).default(this.options.maxEventLimit,this.namespace,this.logger,this.deleteItem)}storeType(){return n("gKFhB").StoreType.INDEXEDDB}}}),a("1vRDG",function(t,r){e(t.exports,"GET_ITEM_COUNT",()=>i),e(t.exports,"VISIBILITY_TIMEOUT",()=>s),e(t.exports,"MAX_ATTEMPTS",()=>n),e(t.exports,"EVENT_COUNT_LIMIT",()=>a);let i=7,s=6e4,n=10,a=5e3}),a("iyV9N",function(t,r){e(t.exports,"default",()=>s);var i=n("5zQU9");class s{constructor(e,t,r,s){if((0,i.default)(this,"deleteOldestNEvents",async(e,t)=>{var r;let i=e.index(n("gKFhB").NAMESPACE_AND_TIME_ADDED_INDEX),s=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),a=i.getAllKeys(s,t),o=await (0,n("20tEp").requestToPromise)(a),l=null==o?void 0:null===(r=o.target)||void 0===r?void 0:r.result;if(l&&Array.isArray(l)&&l.length>0)try{let t=l.map(t=>this.deleteItemHandler(e,t));await Promise.all(t)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}}),e>0)this.eventLimit=e;else throw Error("Event Limit has to be set higher than 1");this.namespace=t,this.logger=r,this.deleteItemHandler=s}async insertItems(e,t,r=n("gKFhB").GuardPolicy.ABANDON){let i=[...t],s=0;switch(r){case n("gKFhB").GuardPolicy.ABANDON:await this.throwIfNotEnoughSpace(e,t.length);break;case n("gKFhB").GuardPolicy.EVICT:s=await this.evictIfNotEnoughSpace(e,t.length);break;case n("gKFhB").GuardPolicy.IGNORE:await this.calculateHowManyEventsWeCanAdd(e,i)}let a=i.map(t=>(0,n("20tEp").requestToPromise)(e.add(t)));return await Promise.all(a),await (0,n("20tEp").commitTransaction)(e.transaction,this.logger),{items:i,numberOfEvictedItems:s}}async throwIfNotEnoughSpace(e,t){let r=await this.calculateFreeSpace(e);if(r<t)throw new(n("cjuzB")).default(`Not enough space in IndexedDb. Needed ${t} but only had ${r}`)}async evictIfNotEnoughSpace(e,t){let r=await this.calculateFreeSpace(e);if(r<t){let i=t-r;return await this.deleteOldestNEvents(e,i),i}return 0}async calculateHowManyEventsWeCanAdd(e,t){let r=await this.calculateFreeSpace(e);if(r<t.length){let e=t.length-r,i=t.length-e;t.splice(i,e)}}async calculateFreeSpace(e){let t=await this.getCountofEventsInObjectStore(e);return this.eventLimit-t}async getCountofEventsInObjectStore(e){let t=e.index(n("gKFhB").NAMESPACE_AND_TIME_ADDED_INDEX),r=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),i=t.count(r),s=await (0,n("20tEp").requestToPromise)(i);return s.target.result}}}),a("20tEp",function(r,i){e(r.exports,"convertToItemWrapper",()=>a),e(r.exports,"createOptionsWithDefaults",()=>o),e(r.exports,"requestToPromise",()=>l),e(r.exports,"commitTransaction",()=>u),e(r.exports,"monitorErrorsOnRequest",()=>d);var s=n("dFBS3");let a=(e,r,{id:i,retryAttempts:n,timeToProcessOffset:a})=>({item:e,id:i||t(s)(),retryAttempts:n||0,timeToBeProcessedAfter:Date.now()+(a||0),namespace:r,timeAdded:Date.now()}),o=e=>({logger:e.logger||console,useMemory:e.useMemory||!1,maxAttempts:e.maxAttempts||n("1vRDG").MAX_ATTEMPTS,maxEventLimit:e.maxEventLimit||n("1vRDG").EVENT_COUNT_LIMIT}),l=e=>new Promise((t,r)=>{e.onsuccess=e=>{t(e)},e.onerror=e=>{r(e)}}),c=e=>new Promise((t,r)=>{e.oncomplete=()=>{t()},e.onerror=e=>{r(e)},e.onabort=e=>{r(e)}}),u=(e,t)=>{try{"function"==typeof e.commit&&e.commit()}catch(e){throw t.error("Failed to force commit transaction:",e),e}return c(e)},d=(e,t)=>{e.onerror=e=>{t.warn("Error thrown from request:",e)}}}),a("9vF9y",function(t,r){e(t.exports,"default",()=>c);var i=n("5zQU9"),s=n("bwPfh");let a=["item"],o=["items"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}class c{constructor(e,t={}){this.namespace=e,this.memoryStore=[],this.options=(0,n("20tEp").createOptionsWithDefaults)(t),this.globalEventLimitGuard=new(n("d2F6m")).default(this.options.maxEventLimit,{addItems:this.addItems.bind(this),getItemCount:this.getItemCount.bind(this),evictEventsIfNeeded:this.evictEventsIfNeeded.bind(this)})}async addItem(e,t={},r=n("gKFhB").GuardPolicy.ABANDON){if(r===n("gKFhB").GuardPolicy.IGNORE)throw new(n("fFUMz")).default(r,"IndexedDbConnector#addItem");let i=(0,n("20tEp").convertToItemWrapper)(e,this.namespace,t),s=await this.globalEventLimitGuard.insertItemsToMemoryStore([i],r);return Promise.resolve({item:s.items[0],numberOfEvictedItems:s.numberOfEvictedItems})}bulkAddItem(e,t=n("gKFhB").GuardPolicy.ABANDON){let r=e.map(e=>{let{item:t}=e,r=(0,s.default)(e,a);return(0,n("20tEp").convertToItemWrapper)(t,this.namespace,r)});return this.bulkAddItemWrapperType(r,t)}bulkAddItemWrapperType(e,t=n("gKFhB").GuardPolicy.ABANDON){return Promise.resolve(this.globalEventLimitGuard.insertItemsToMemoryStore(e,t))}getItems(e=n("1vRDG").GET_ITEM_COUNT){return Promise.resolve(this.synchronousGetItems(e))}synchronousGetItems(e=n("1vRDG").GET_ITEM_COUNT){let t=e>0?e:n("1vRDG").GET_ITEM_COUNT,r=Date.now(),s=[],a=[];for(let e of this.memoryStore)if(e.timeToBeProcessedAfter<=r&&(s.push(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e)),e.timeToBeProcessedAfter+=n("1vRDG").VISIBILITY_TIMEOUT,e.retryAttempts+=1,e.retryAttempts>=this.options.maxAttempts&&a.push(e)),s.length>=t)break;return a.forEach(e=>{let t=this.memoryStore.indexOf(e);this.memoryStore.splice(t,1)}),{items:s,numberOfDeletedItems:a.length}}deleteItems(e){return this.memoryStore=this.memoryStore.filter(t=>!e.includes(t.id)),Promise.resolve(void 0)}getItemCount(){let e=Date.now(),t=this.memoryStore.filter(t=>t.timeToBeProcessedAfter<=e).length;return Promise.resolve(t)}async processItems(e,t){let r=this.synchronousGetItems(t),{items:i}=r,a=(0,s.default)(r,o),l=i.map(e=>e.id);try{let t=await e(i,a);return await this.deleteItems(l),t}catch(e){throw new(n("dJ5oQ")).default(e)}}storeType(){return n("gKFhB").StoreType.MEMORY}addItems(e){this.memoryStore.push(...e),this.memoryStore.sort(function(e,t){return e.timeAdded-t.timeAdded})}evictEventsIfNeeded(e){let t=this.memoryStore.length;if(t>e){let r=t-e;return this.memoryStore.splice(0,r),r}return 0}}}),a("d2F6m",function(t,r){e(t.exports,"default",()=>s);var i=n("5zQU9");class s{constructor(e,t){if((0,i.default)(this,"insertItemsToMemoryStore",(e,t)=>{switch(t){case n("gKFhB").GuardPolicy.ABANDON:return this.handleAbandonIfLimitWillExceedPolicy(e);case n("gKFhB").GuardPolicy.EVICT:return Promise.resolve(this.handleEvictOldestIfLimitExceededPolicy(e));case n("gKFhB").GuardPolicy.IGNORE:return this.handleAddAsManyAsPossible(e)}}),e>0)this.eventLimit=e;else throw Error("Event Limit has to be set higher than 1");this.memoryItemHandlers=t}async handleAbandonIfLimitWillExceedPolicy(e){let t=await this.memoryItemHandlers.getItemCount();if(t+e.length>this.eventLimit)throw new(n("cjuzB")).default(n("gKFhB").StoreType.MEMORY);return this.memoryItemHandlers.addItems(e),{items:e,numberOfEvictedItems:0}}handleEvictOldestIfLimitExceededPolicy(e){this.memoryItemHandlers.addItems(e);let t=this.memoryItemHandlers.evictEventsIfNeeded(this.eventLimit);return{items:e,numberOfEvictedItems:t}}async handleAddAsManyAsPossible(e){let t=this.eventLimit-await this.memoryItemHandlers.getItemCount(),r=t>e.length?e:e.slice(0,t);return this.memoryItemHandlers.addItems(r),{items:r,numberOfEvictedItems:0}}}}),a("j1fnp",function(t,r){e(t.exports,"default",()=>o);var i=n("5zQU9");class s{constructor(){(0,i.default)(this,"itemsDiscardedByRetry",0),(0,i.default)(this,"eventCount",0),(0,i.default)(this,"itemsDiscardedByOverflow",0),(0,i.default)(this,"resilienceMechanism",n("hObqm").ResilienceMechanism.INDEXEDDB),(0,i.default)(this,"localstorageNumberOfQueuesPurged",0),(0,i.default)(this,"localstorageNumberOfFullReclaims",0),(0,i.default)(this,"localstorageNumberOfPartialReclaims",0),(0,i.default)(this,"localstorageNumberOfFailedReclaims",0)}addToItemsDiscardedByRetryCounter(e=1){this.itemsDiscardedByRetry+=e}addToEventCount(){this.eventCount++}addToItemsDiscardedByOverflowCounter(e=1){this.itemsDiscardedByOverflow+=e}setResilienceMechanism(e){this.resilienceMechanism=e}addToReclaimMetrics(e){this.localstorageNumberOfFullReclaims+=e.fullReclaims,this.localstorageNumberOfPartialReclaims+=e.partialReclaims,this.localstorageNumberOfFailedReclaims+=e.failedReclaims}addToPurgedQueuesMetrics(e){this.localstorageNumberOfQueuesPurged+=e}subtractFromMetrics(e){this.itemsDiscardedByRetry=this.subtractFromCount(this.itemsDiscardedByRetry,e.itemsDiscardedByRetry),this.eventCount=this.subtractFromCount(this.eventCount,e.eventCount),this.itemsDiscardedByOverflow=this.subtractFromCount(this.itemsDiscardedByOverflow,e.itemsDiscardedByOverflow),this.localstorageNumberOfFullReclaims=this.subtractFromCount(this.localstorageNumberOfFullReclaims,e.fullReclaims),this.localstorageNumberOfPartialReclaims=this.subtractFromCount(this.localstorageNumberOfPartialReclaims,e.partialReclaims),this.localstorageNumberOfFailedReclaims=this.subtractFromCount(this.localstorageNumberOfFailedReclaims,e.failedReclaims),this.localstorageNumberOfQueuesPurged=this.subtractFromCount(this.localstorageNumberOfQueuesPurged,e.localstorageQueuesPurged)}subtractFromCount(e,t){return Math.max(e-(t||0),0)}getMetricsPayload(){return{itemsDiscardedByRetry:this.itemsDiscardedByRetry,eventCount:this.eventCount,itemsDiscardedByOverflow:this.itemsDiscardedByOverflow,resilienceMechanism:this.resilienceMechanism,localstorageQueuesPurged:this.localstorageNumberOfQueuesPurged,fullReclaims:this.localstorageNumberOfFullReclaims,partialReclaims:this.localstorageNumberOfPartialReclaims,failedReclaims:this.localstorageNumberOfFailedReclaims}}}let a=null;var o=()=>(a||(a=new s),a)}),a("hObqm",function(t,r){var i,s;e(t.exports,"ResilienceMechanism",()=>n),e(t.exports,"NetworkStatusEnum",()=>a);let n=((i={}).INDEXEDDB="indexeddb",i.MEMORY="memory",i),a=((s={})[s.ONLINE=0]="ONLINE",s[s.OFFLINE=1]="OFFLINE",s)}),a("4g0Nt",function(t,r){e(t.exports,"default",()=>i);class i{constructor(e){"undefined"!=typeof window&&(window.addEventListener("offline",()=>e(n("hObqm").NetworkStatusEnum.OFFLINE)),window.addEventListener("online",()=>e(n("hObqm").NetworkStatusEnum.ONLINE)))}getNetworkStatus(){return window.navigator.onLine?n("hObqm").NetworkStatusEnum.ONLINE:n("hObqm").NetworkStatusEnum.OFFLINE}}}),a("9XgvA",function(t,r){e(t.exports,"default",()=>l);var i,s=n("5zQU9");let a={minRetryDelay:1e3,maxRetryDelay:3e4,backoffFactor:2,backoffJitterPercentage:0,waitInterval:500,callbackTimeoutPeriod:5e3},o=((i={})[i.NONE=0]="NONE",i[i.IMMEDIATE=1]="IMMEDIATE",i[i.WAIT=2]="WAIT",i);class l{constructor(e,t){(0,s.default)(this,"schedule",({immediate:e}={immediate:!1})=>{"undefined"!=typeof window&&(this.operationInFlight?e?this.queuedSchedule=o.IMMEDIATE:this.queuedSchedule!==o.IMMEDIATE&&(this.queuedSchedule=o.WAIT):(e||this.options.waitInterval<=0)&&0===this.failureCount?(this.clearTimeout(),this.run()):this.failureCount>0&&null===this.scheduledTimeout?this.scheduledTimeout=window.setTimeout(this.run,this.calculateBackoff()):null===this.scheduledTimeout&&(this.scheduledTimeout=window.setTimeout(this.run,this.options.waitInterval)))}),(0,s.default)(this,"stop",()=>{this.clearTimeout(),this.queuedSchedule=o.NONE}),(0,s.default)(this,"getFailureCount",()=>this.failureCount),(0,s.default)(this,"getCallbackStatus",()=>this.callbackTimer.getCallbackStatus()),(0,s.default)(this,"clearTimeout",()=>{"undefined"!=typeof window&&null!==this.scheduledTimeout&&(window.clearTimeout(this.scheduledTimeout),this.scheduledTimeout=null)}),(0,s.default)(this,"run",()=>{this.operationInFlight=!0,this.clearTimeout();try{this.callbackTimer.executeCallbackWithTimeout(this.callback,this.done,()=>this.done(n("feAgz").DoneState.ERROR))}catch(e){this.done(e)}}),(0,s.default)(this,"done",e=>{this.operationInFlight=!1,e===n("feAgz").DoneState.ERROR||this.callbackTimer.getCallbackStatus()===n("3LYuU").CallbackStatus.TIMED_OUT?(this.failureCount++,this.clearTimeout()):e===n("feAgz").DoneState.SUCCESS&&(this.failureCount=0),this.processQueuedSchedule()}),(0,s.default)(this,"processQueuedSchedule",()=>{if(this.queuedSchedule!==o.NONE){let e=this.queuedSchedule===o.IMMEDIATE;this.queuedSchedule=o.NONE,this.schedule({immediate:e})}else this.failureCount>0&&this.schedule()}),(0,s.default)(this,"calculateBackoff",()=>{let{minRetryDelay:e,maxRetryDelay:t,backoffFactor:r,backoffJitterPercentage:i}=this.options,s=e*r**this.failureCount;if(i){let e=Math.random(),t=Math.floor(e*i*s);5>Math.floor(10*e)?s-=t:s+=t}return Number(Math.min(s,t).toPrecision(1))}),this.options={minRetryDelay:e.minRetryDelay||a.minRetryDelay,maxRetryDelay:e.maxRetryDelay||a.maxRetryDelay,backoffFactor:e.backoffFactor||a.backoffFactor,backoffJitterPercentage:e.backoffJitterPercentage||a.backoffJitterPercentage,waitInterval:void 0!==e.waitInterval?e.waitInterval:a.waitInterval,callbackTimeoutPeriod:e.callbackTimeoutPeriod||a.callbackTimeoutPeriod},this.scheduledTimeout=null,this.failureCount=0,this.callback=t,this.operationInFlight=!1,this.queuedSchedule=o.NONE,this.callbackTimer=new(n("3LYuU")).CallbackWithTimeout(this.options.callbackTimeoutPeriod)}}}),a("3LYuU",function(t,r){e(t.exports,"CallbackStatus",()=>o),e(t.exports,"CallbackWithTimeout",()=>c);var i,s,a=n("5zQU9");let o=((i={}).IDLE="idle",i.RUNNING="running",i.COMPLETED="completed",i.TIMED_OUT="timedOut",i),l=((s={}).EXECUTE="execute",s.COMPLETE="complete",s.TIMEOUT="timeout",s);class c{constructor(e){if((0,a.default)(this,"timeoutHandle",void 0),(0,a.default)(this,"callbackStatus",o.IDLE),e>0){this.timeoutPeriod=e;return}throw Error("CallbackWithTimeout requires timeout period higher than 0")}transitionCallbackStatus(e,t){switch(e){case o.IDLE:case o.TIMED_OUT:case o.COMPLETED:t===l.EXECUTE&&(this.callbackStatus=o.RUNNING);break;case o.RUNNING:switch(t){case l.COMPLETE:this.callbackStatus=o.COMPLETED;break;case l.TIMEOUT:this.callbackStatus=o.TIMED_OUT}break;default:this.callbackStatus=e}}executeCallbackWithTimeout(e,t,r){"undefined"!=typeof window&&(this.transitionCallbackStatus(this.callbackStatus,l.EXECUTE),this.timeoutHandle=window.setTimeout(()=>{this.transitionCallbackStatus(this.callbackStatus,l.TIMEOUT),r()},this.timeoutPeriod),e(e=>{this.cancelTimeout(),this.getCallbackStatus()!==o.TIMED_OUT&&(this.transitionCallbackStatus(this.callbackStatus,l.COMPLETE),t(e))}))}getCallbackStatus(){return this.callbackStatus}cancelTimeout(){"undefined"!=typeof window&&this.timeoutPeriod>0&&this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0)}}}),a("feAgz",function(t,r){var i;e(t.exports,"DoneState",()=>s);let s=((i={})[i.NOOP=0]="NOOP",i[i.SUCCESS=1]="SUCCESS",i[i.ERROR=2]="ERROR",i)}),a("buuYU",function(t,r){e(t.exports,"attachXidToMultipleEvents",()=>o);var i=n("5zQU9");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}async function o(e,t){try{let r=await t;return e.map(e=>(function(e,t){if(!(t&&t instanceof Function))return e;if(e.msg.type===n("6gNKz").SegmentEventTypes.PAGE||e.msg.type===n("6gNKz").SegmentEventTypes.TRACK){let r=t();r&&Array.isArray(r)&&(e.msg.properties=a(a({},e.msg.properties),{},{xid:r}))}else if(e.msg.traits&&e.msg.type===n("6gNKz").SegmentEventTypes.IDENTIFY){let r=t();r&&Array.isArray(r)&&(e.msg.traits=a(a({},e.msg.traits),{},{xid:r}))}return e})(e,r))}catch(t){return e}}}),a("6gNKz",function(t,r){var i,s,n;e(t.exports,"SegmentEventTypes",()=>a);let a=((i={}).IDENTIFY="identify",i.PAGE="page",i.TRACK="track",i);(s={}).XC="xc",s.UID="uid",(n={}).NEW="NEW",n.CHANGED="CHANGED",n.EXISTING="EXISTING",n.TIMEOUT="TIMEOUT",n.ERROR="ERROR",n.UNAVAILABLE="UNAVAILABLE",n.MALFORMED="MALFORMED",n.UNKNOWN="UNKNOWN"}),a("dhCt2",function(t,r){e(t.exports,"DEFAULT_REQUEST_TIMEOUT",()=>i);let i=1e4}),a("bpctN",function(t,r){e(t.exports,"sendEvents",()=>a);var i=n("5zQU9");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}let a=async e=>{var t;let r=null===(t=o(e))||void 0===t?void 0:t.signal,n=l(e.url),a=await fetch(e.url,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(e.batch),signal:r},n));if(429===a.status||a.status>=500&&a.status<600)throw Error(`HTTP Error ${a.status} (${a.statusText})`);return a},o=e=>{if(e.abortController)return e.abortController;if(e.timeout){let t=new AbortController;return setTimeout(()=>{t.abort()},e.timeout),t}},l=(0,n("5iWql").default)(e=>{let t=new URL(e).origin;return t===location.origin?{}:{mode:"cors",credentials:"include"}})}),a("5UpLh",function(r,i){e(r.exports,"default",()=>c);var s=n("dFBS3");let a="SAFE",o="UNSAFE",l="LOCAL_STORAGE";class c{constructor(e){this.store=new(n("empVP")).default({useStoragePrefix:!1}),this.cookie=new(n("iUe7A")).default(e)}getUserId(){return this.userId||null}setUserId(e){this.userId=e}getAnonymousId(e){return this.getAnonymousIdFromLocalStorageAndUpdateCookieIfStale()||this.getAnonymousIdFromCookieAndUpdateLocalStorage()||this.generateNewAnonymousId(e)}setAnonymousId(e){let t=JSON.stringify(e);return this.cookie.set(n("eSBJq").AWCCookiesKeys.AJS_ANONYMOUS_ID,t),this.lastAnonymousIdCookieUpdate=Date.now(),this.store.setItem((0,n("eSBJq").AllAnalyticsCookies).AJS_ANONYMOUS_ID.getKey(),t)}getAnonymousIdFromStorage(e){let t=e===l?this.store.getItem((0,n("eSBJq").AllAnalyticsCookies).AJS_ANONYMOUS_ID.getKey()):this.cookie.get(n("eSBJq").AWCCookiesKeys.AJS_ANONYMOUS_ID);if(t){let e={type:o,anonymousId:t};try{let r=JSON.parse(t);if(r&&"string"==typeof r)return{type:a,anonymousId:r};return e}catch(t){return e}}return{type:"NOT_FOUND"}}getAnonymousIdFromLocalStorageAndUpdateCookieIfStale(){let e=this.getAnonymousIdFromStorage(l),t=!1;switch((!this.lastAnonymousIdCookieUpdate||(0,n("d2wNG").default)(new Date,new Date(this.lastAnonymousIdCookieUpdate))>=7)&&(t=!0),e.type){case a:return t&&this.setAnonymousId(e.anonymousId),e.anonymousId;case o:return e.anonymousId;default:return null}}getAnonymousIdFromCookieAndUpdateLocalStorage(){let e=this.getAnonymousIdFromStorage("COOKIE");switch(e.type){case a:case o:return this.store.setItem((0,n("eSBJq").AllAnalyticsCookies).AJS_ANONYMOUS_ID.getKey(),JSON.stringify(e.anonymousId)),e.anonymousId;default:return null}}generateNewAnonymousId(e=t(s)){let r=e();return this.setAnonymousId(r),r}}}),a("eSBJq",function(t,r){var i;e(t.exports,"AWCCookiesKeys",()=>s),e(t.exports,"AllAnalyticsCookies",()=>a);let s=((i={}).AWC_TLD_TEST="AWC_TLD_TEST",i.AWC_ANALYTICS_DEBUG="AWC_ANALYTICS_DEBUG",i.AJS_ANONYMOUS_ID="AJS_ANONYMOUS_ID",i);class n{constructor(e,t){this.key=e,this.options=t}getAttributes(){return this.options}getKey(){return this.key}}let a={[s.AWC_TLD_TEST]:new n("__awc_tld_test__",{expires:365,secure:"https:"===window.location.protocol,path:"/"}),[s.AWC_ANALYTICS_DEBUG]:new n("atlassian_analytics_debug",{expires:365,secure:"https:"===window.location.protocol,path:"/"}),[s.AJS_ANONYMOUS_ID]:new n("ajs_anonymous_id",{expires:365,secure:"https:"===window.location.protocol,path:"/"})}}),a("iUe7A",function(r,i){e(r.exports,"default",()=>c);var s=n("5zQU9"),a=n("M2DFp");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class c{constructor(e){this.cookieLike=(0,n("4ieaT").canUseCookie)(e)?t(a):new(n("3GvaU")).default}set(e,t,r){if(!n("eSBJq").AllAnalyticsCookies[e]){console.warn(`Unknown cookie key ${e} provided, not set.`);return}return this.cookieLike.set((0,n("eSBJq").AllAnalyticsCookies)[e].getKey(),t,l(l({},(0,n("eSBJq").AllAnalyticsCookies)[e].getAttributes()),{},{domain:(0,n("4ieaT").getTld)()},r))}get(e){if(!n("eSBJq").AllAnalyticsCookies[e]){console.warn(`Unknown cookie key ${e} provided, not fetched.`);return}return this.cookieLike.get((0,n("eSBJq").AllAnalyticsCookies)[e].getKey())}remove(e,t){if(!n("eSBJq").AllAnalyticsCookies[e]){console.warn(`Unknown cookie key ${e} provided, not removed.`);return}this.cookieLike.remove((0,n("eSBJq").AllAnalyticsCookies)[e].getKey(),l({},t))}}}),a("3GvaU",function(t,r){e(t.exports,"default",()=>i);class i{constructor(){this.safeStorage=new(n("empVP")).default({useStoragePrefix:!1})}set(e,t){return this.safeStorage.setItem(e,t),t}get(e){let t=this.safeStorage.getItem(e);return t||void 0}remove(e){this.safeStorage.removeItem(e)}}}),a("empVP",function(t,r){e(t.exports,"default",()=>i);class i extends n("asdds").default{constructor(e){let t;try{t=window.localStorage||n("6PZgF").default}catch(e){t=n("6PZgF").default}super(t,e)}}}),a("6PZgF",function(t,r){e(t.exports,"default",()=>s);var i=n("5zQU9"),s=new class{constructor(){(0,i.default)(this,"_data",{}),(0,i.default)(this,"length",0),(0,i.default)(this,"setItem",(e,t)=>(this._data[e]=t,this.length=Object.keys(this._data).length,t)),(0,i.default)(this,"getItem",e=>e in this._data?this._data[e]:null),(0,i.default)(this,"removeItem",e=>(e in this._data&&delete this._data[e],this.length=Object.keys(this._data).length,null)),(0,i.default)(this,"clear",()=>{this._data={},this.length=0}),(0,i.default)(this,"key",e=>Object.keys(this._data)[e])}}}),a("asdds",function(t,r){e(t.exports,"default",()=>o);var i=n("5zQU9");let s="awcInMemoryStorageFallback";function a(e){let t="test_value";if(!e)return!1;try{let r="awc.storage.support";e.setItem(r,t);let i=e.getItem(r);return e.removeItem(r),i===t}catch(e){return!1}}class o{constructor(e,t={}){(0,i.default)(this,"getStore",()=>this._store),(0,i.default)(this,"getItem",e=>this._store.getItem(this.createKey(e))),(0,i.default)(this,"removeItem",e=>this._store.removeItem(this.createKey(e))),(0,i.default)(this,"setItem",(e,t)=>{try{this._store.setItem(this.createKey(e),t)}catch(r){(function(e){let t=!1;if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0)}else -2147024882===e.number&&(t=!0);return t})(r)&&(this.swapToInMemory(),this._store.setItem(this.createKey(e),t))}}),(0,i.default)(this,"swapToInMemory",()=>{let e;if(this._store===n("6PZgF").default||"undefined"==typeof window)return;let t=Object.keys(this._store||{});a(window[s])?e=window[s]:(e=n("6PZgF").default,window[s]||(window[s]=n("6PZgF").default)),t.forEach(t=>{if(0===t.indexOf(this.getPrefix())){let r=this._store.getItem(t);r&&e.setItem(t,r)}}),this._store=e}),(0,i.default)(this,"clear",()=>this._store.clear()),(0,i.default)(this,"key",e=>this._store.key(e)),(0,i.default)(this,"getPrefix",()=>this._prefix),(0,i.default)(this,"createKey",e=>this._prefix?`${this.getPrefix()}.${e}`:e),this.options=t;let r=[];(void 0===t.useStoragePrefix||t.useStoragePrefix)&&r.push("awc"),t.envPrefix&&t.envPrefix!==n("hRleJ").envType.PROD&&r.push(t.envPrefix),this._prefix=r.join("-"),a(e)?this._store=e:this.swapToInMemory()}}}),a("4ieaT",function(r,i){e(r.exports,"canUseCookie",()=>a),e(r.exports,"getTld",()=>c);var s=n("M2DFp");let a=(e=!1)=>!e&&!("file:"===location.protocol||"chrome-extension:"===location.protocol),o=(0,n("eSBJq").AllAnalyticsCookies).AWC_TLD_TEST.getKey(),l="tld_test",c=(0,n("5iWql").default)(()=>{if("undefined"==typeof location)return"";let{hostname:e}=location,r=e.split(".");for(let e=1;e<=r.length;e++){let i=r.slice(-1*e),n=`.${i.join(".")}`;if(t(s).set(o,l,{domain:n}),t(s).get(o)===l)return t(s).remove(o,{domain:n}),n}return e})}),a("kPI67",function(r,i){e(r.exports,"buildContext",()=>c),e(r.exports,"prepareEventProperties",()=>u);var s=n("5zQU9"),a=n("kpOtk");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let c=e=>l(l({},e.context),{},{userAgent:navigator.userAgent}),u=e=>{let r=d(e);return t(a)(r)},d=e=>{if(null===e||"object"!=typeof e)return e;let t={};return Object.keys(e).forEach(r=>{let i=h(e,r);void 0!==i&&(Array.isArray(i)?t[r]=i.map(e=>d(e)):"object"==typeof i&&null!==i?t[r]=d(i):t[r]=i)}),t},h=(e,t)=>e[t]}),a("b88ir",function(t,r){e(t.exports,"default",()=>s);var i=n("5zQU9");class s{constructor(){(0,i.default)(this,"handleOriginParameters",(e,t)=>{let r=Object.keys(e);if(!(r.length>0))throw Error("Empty parameter mapping provided");let i=r.filter(e=>0>Object.values(n("hRleJ").originTracingType).indexOf(e));if(i.length>0)throw Error(`Invalid Origin Tracing Parameter(s) supplied: ${i.join()}!`);let s=(0,n("8TuVU").default)((e,t)=>r.indexOf(t)>=0,t),a=Object.keys(s).map(t=>{let r=e[t](s[t]);return{[t]:r}}).reduce((e,t)=>Object.assign(e,t),{});return a}),this._originStore={}}}}),a("8TuVU",function(t,r){e(t.exports,"defaultHistoryReplaceFn",()=>s),e(t.exports,"default",()=>a);var i=n("4ea7H");let s=e=>window.history.replaceState({},"",e);var a=(e,t=s)=>{let r=window.location.href,a=window.location.hash,o=""!==a?r.replace(a,""):r,{url:l,query:c}=(0,i.parseUrl)(o),u=(0,n("eaJEm").pickBy)(c,e);if(Object.keys(u).length>0){let r=(0,n("eaJEm").omitBy)(c,e);if(Object.keys(r).length>0){let e=`${l}?${(0,i.stringify)(r)}${a}`;t(e)}else t(`${l}${a}`)}return u}}),a("4ea7H",function(t,r){e(t.exports,"extract",()=>i,e=>i=e),e(t.exports,"parse",()=>s,e=>s=e),e(t.exports,"stringify",()=>a,e=>a=e),e(t.exports,"parseUrl",()=>o,e=>o=e),e(t.exports,"stringifyUrl",()=>l,e=>l=e),e(t.exports,"pick",()=>c,e=>c=e),e(t.exports,"exclude",()=>u,e=>u=e);var i,s,a,o,l,c,u,d=n("hXDaG"),h=n("bJEvY"),p=n("9CHQr"),f=n("aARfw");let m=e=>null==e,g=Symbol("encodeFragmentIdentifier");function y(e){if("string"!=typeof e||1!==e.length)throw TypeError("arrayFormatSeparator must be single character string")}function v(e,t){return t.encode?t.strict?d(e):encodeURIComponent(e):e}function b(e,t){return t.decode?h(e):e}function E(e){let t=e.indexOf("#");return -1!==t&&(e=e.slice(0,t)),e}function I(e){e=E(e);let t=e.indexOf("?");return -1===t?"":e.slice(t+1)}function O(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):t.parseBooleans&&null!==e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())&&(e="true"===e.toLowerCase()),e}function w(e,t){y((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);let r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,i)=>{if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t){i[e]=r;return}void 0===i[e]&&(i[e]={}),i[e][t[1]]=r};case"bracket":return(e,r,i)=>{if(t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),!t){i[e]=r;return}if(void 0===i[e]){i[e]=[r];return}i[e]=[].concat(i[e],r)};case"colon-list-separator":return(e,r,i)=>{if(t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),!t){i[e]=r;return}if(void 0===i[e]){i[e]=[r];return}i[e]=[].concat(i[e],r)};case"comma":case"separator":return(t,r,i)=>{let s="string"==typeof r&&r.includes(e.arrayFormatSeparator),n="string"==typeof r&&!s&&b(r,e).includes(e.arrayFormatSeparator);r=n?b(r,e):r;let a=s||n?r.split(e.arrayFormatSeparator).map(t=>b(t,e)):null===r?r:b(r,e);i[t]=a};case"bracket-separator":return(t,r,i)=>{let s=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!s){i[t]=r?b(r,e):r;return}let n=null===r?[]:r.split(e.arrayFormatSeparator).map(t=>b(t,e));if(void 0===i[t]){i[t]=n;return}i[t]=[].concat(i[t],n)};default:return(e,t,r)=>{if(void 0===r[e]){r[e]=t;return}r[e]=[].concat(r[e],t)}}}(t),i=Object.create(null);if("string"!=typeof e||!(e=e.trim().replace(/^[?#&]/,"")))return i;for(let s of e.split("&")){if(""===s)continue;let[e,n]=p(t.decode?s.replace(/\+/g," "):s,"=");n=void 0===n?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?n:b(n,t),r(b(e,t),n,i)}for(let e of Object.keys(i)){let r=i[e];if("object"==typeof r&&null!==r)for(let e of Object.keys(r))r[e]=O(r[e],t);else i[e]=O(r,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce((e,t)=>{let r=i[t];return r&&"object"==typeof r&&!Array.isArray(r)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(r):e[t]=r,e},Object.create(null))}i=I,s=w,a=(e,t)=>{if(!e)return"";y((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);let r=r=>t.skipNull&&m(e[r])||t.skipEmptyString&&""===e[r],i=function(e){switch(e.arrayFormat){case"index":return t=>(r,i)=>{let s=r.length;return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,[v(t,e),"[",s,"]"].join("")]:[...r,[v(t,e),"[",v(s,e),"]=",v(i,e)].join("")]};case"bracket":return t=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,[v(t,e),"[]"].join("")]:[...r,[v(t,e),"[]=",v(i,e)].join("")];case"colon-list-separator":return t=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,[v(t,e),":list="].join("")]:[...r,[v(t,e),":list=",v(i,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(i,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?i:(s=null===s?"":s,0===i.length)?[[v(r,e),t,v(s,e)].join("")]:[[i,v(s,e)].join(e.arrayFormatSeparator)]}default:return t=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:null===i?[...r,v(t,e)]:[...r,[v(t,e),"=",v(i,e)].join("")]}}(t),s={};for(let t of Object.keys(e))r(t)||(s[t]=e[t]);let n=Object.keys(s);return!1!==t.sort&&n.sort(t.sort),n.map(r=>{let s=e[r];return void 0===s?"":null===s?v(r,t):Array.isArray(s)?0===s.length&&"bracket-separator"===t.arrayFormat?v(r,t)+"[]":s.reduce(i(r),[]).join("&"):v(r,t)+"="+v(s,t)}).filter(e=>e.length>0).join("&")},o=(e,t)=>{t=Object.assign({decode:!0},t);let[r,i]=p(e,"#");return Object.assign({url:r.split("?")[0]||"",query:w(I(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:b(i,t)}:{})},l=(e,t)=>{t=Object.assign({encode:!0,strict:!0,[g]:!0},t);let r=E(e.url).split("?")[0]||"",n=i(e.url),o=s(n,{sort:!1}),l=Object.assign(o,e.query),c=a(l,t);c&&(c=`?${c}`);let u=function(e){let t="",r=e.indexOf("#");return -1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(u=`#${t[g]?v(e.fragmentIdentifier,t):e.fragmentIdentifier}`),`${r}${c}${u}`},c=(e,t,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[g]:!1},r);let{url:i,query:s,fragmentIdentifier:n}=o(e,r);return l({url:i,query:f(s,t),fragmentIdentifier:n},r)},u=(e,t,r)=>{let i=Array.isArray(t)?e=>!t.includes(e):(e,r)=>!t(e,r);return c(e,i,r)}}),a("hrLBB",function(t,r){e(t.exports,"selectHost",()=>c);let i="/gateway/api/gasv3/api/v1",s=e=>e&&e===n("hRleJ").envOverrides.FEDRAMP_MODERATE_SANDBOX?"as.atlassian-fex.com/api/v1":"as.staging.atl-paas-us-gov-mod.net/api/v1",a=e=>e&&e===n("hRleJ").envOverrides.FEDRAMP_MODERATE_SANDBOX?"api-private.atlassian-fex.com/gasv3/api/v1":"api.stg.atlassian-us-gov-mod.com/gasv3/api/v1",o=({useStargate:e,env:t,useLegacyUrl:r,envOverride:o})=>{if(t===n("hRleJ").envType.LOCAL||t===n("hRleJ").envType.DEV)throw Error("No LOCAL or DEV environments for FedRAMP.");if(t===n("hRleJ").envType.PROD&&o)throw Error("Cannot override to FedRAMP Sandbox for Prod.");return e?r?t===n("hRleJ").envType.PROD?"api.atlassian-us-gov-mod.com/gasv3/api/v1":a(o):window.location.host+i:t===n("hRleJ").envType.PROD?"as.atlassian-us-gov-mod.com/api/v1":s(o)},l=({useStargate:e,env:t,useLegacyUrl:r})=>e?r?t===n("hRleJ").envType.PROD?"api-private.atlassian.com/gasv3/api/v1":"api-private.stg.atlassian.com/gasv3/api/v1":window.location.host+i:t===n("hRleJ").envType.PROD?"as.atlassian.com/api/v1":"as.staging.atl-paas.net/api/v1";function c({useStargate:e,env:t,useLegacyUrl:r,perimeter:i,envOverride:s}){return i===n("hRleJ").perimeterType.FEDRAMP_MODERATE?o({useStargate:e,env:t,useLegacyUrl:r,envOverride:s}):l({useStargate:e,env:t,useLegacyUrl:r})}}),a("1t0DP",function(t,r){e(t.exports,"default",()=>c);var i=n("5zQU9");let s="session.id",a="session.expiry",o=/^\d+$/,l=()=>{};class c{constructor(e={}){(0,i.default)(this,"_generateNewSessionId",()=>{let e=Date.now().toString();return this._safeLocalStorage.setItem(s,e),this._onNewSessionStarted&&this._onNewSessionStarted(),e}),(0,i.default)(this,"_updateSessionExpiry",()=>{let e=Date.now()+this._sessionExpiryTime;return this._safeLocalStorage.setItem(a,e.toString()),e}),(0,i.default)(this,"_debouncedUpdateSessionExpiry",e=>{let{_updateSessionExpiry:t}=this;if(e<Date.now()+this._sessionExpiryDebounceThresholdPercentage*this._sessionExpiryTime)return t();this._sessionExpiryDebounceTimer&&clearTimeout(this._sessionExpiryDebounceTimer),this._sessionExpiryDebounceTimer=setTimeout(()=>{t()},this._sessionExpiryDebounce)}),this._sessionExpiryTime=e.sessionExpiryTime||18e5,this._sessionExpiryDebounce=e.sessionExpiryDebounce||5e3,this._sessionExpiryDebounceThresholdPercentage=e.sessionExpiryDebounceThresholdPercentage||.9,this._onNewSessionStarted=e.onNewSessionStarted?e.onNewSessionStarted:l,this._safeLocalStorage=new(n("empVP")).default}getCurrentSessionId(){let e=this._safeLocalStorage.getItem(s),t=parseInt(this._safeLocalStorage.getItem(a)||"0",10)||0;return(this._debouncedUpdateSessionExpiry(t),!e||t<=Date.now()||Number.isNaN(t)||!o.test(e))?this._generateNewSessionId():e}}}),a("cxp5h",function(t,r){e(t.exports,"default",()=>i);class i extends n("asdds").default{constructor(e){let t;try{t=window.sessionStorage||n("6PZgF").default}catch(e){t=n("6PZgF").default}super(t,e)}}}),a("kzV7m",function(r,i){e(r.exports,"default",()=>l);var s=n("5zQU9"),a=n("dFBS3");let o="tab.id";class l{constructor(){(0,s.default)(this,"_generateNewTabId",()=>{let e=t(a)();return this._safeSessionStorage.setItem(o,e),e}),this._safeSessionStorage=new(n("cxp5h")).default}getCurrentTabId(){let e=this._safeSessionStorage.getItem(o);return e||(e=this._generateNewTabId()),e}}}),a("6L92I",function(r,i){e(r.exports,"default",()=>p);var s=n("5zQU9"),a=n("4ea7H"),o=n("dFBS3");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let u="taskSessions",d="taskSessionsInit",h="awc.";class p{constructor(){(0,s.default)(this,"_taskSessionsNotRecentlyInitialised",e=>null===this._safeSessionStorage.getItem(u)||null===this._safeSessionStorage.getItem(d)||parseInt(this._safeSessionStorage.getItem(d)||"0",10)<e-3e3),(0,s.default)(this,"_removeTaskSessionPrefix",(e,t)=>t.split(h)[1]),(0,s.default)(this,"_isTaskSessionQueryParam",(e,t)=>t.startsWith(h)),(0,s.default)(this,"getAllTaskSessions",()=>{try{return JSON.parse(this._safeSessionStorage.getItem(u)||"")}catch(e){return{}}}),(0,s.default)(this,"_writeToSessionStorage",e=>{try{this._safeSessionStorage.setItem(u,JSON.stringify(e))}catch(e){}}),(0,s.default)(this,"_appendTaskSessions",e=>{let t=this.getAllTaskSessions(),r=null===t?e:Object.assign(t,e);this._writeToSessionStorage(r)}),(0,s.default)(this,"_safelyRemoveKey",(e,t)=>null===e?{}:(delete e[t],e)),(0,s.default)(this,"createTaskSession",e=>{let r=t(o)(),i={};return i[e]=r,this._appendTaskSessions(i),r}),(0,s.default)(this,"createTaskSessionWithProvidedId",(e,t)=>{if("string"!=typeof t)throw TypeError("invalid taskSessionId, must be string");let r={};r[e]=t,this._appendTaskSessions(r)}),(0,s.default)(this,"completeTaskSession",e=>{let t=this.getAllTaskSessions(),r=this._safelyRemoveKey(t,e);this._writeToSessionStorage(r)}),(0,s.default)(this,"formatTaskSessionQueryString",({uri:e,includedTaskSessions:t})=>{let{url:r,query:i}=(0,a.parseUrl)(e),s=this.getAllTaskSessions(),o=t?(0,n("eaJEm").pick)(s,t):(0,n("eaJEm").omit)(s,Object.values(n("hRleJ").originTracingType));if(0===Object.keys(o).length)return e;let l=c(c({},(0,n("eaJEm").mapKeys)(o,(e,t)=>h+t)),i);return`${r}?${(0,a.stringify)(l)}`}),(0,s.default)(this,"stripQueryParameters",()=>{let e=(0,n("eaJEm").mapKeys)((0,n("8TuVU").default)(this._isTaskSessionQueryParam),this._removeTaskSessionPrefix);this._appendTaskSessions(e)});let e=Date.now();this._safeSessionStorage=new(n("cxp5h")).default;try{this._taskSessionsNotRecentlyInitialised(e)&&(this._writeToSessionStorage({}),this._safeSessionStorage.setItem(d,e.toString()))}catch(e){}}}}),a("8Pilt",function(r,i){e(r.exports,"default",()=>u);var s=n("5zQU9"),a=n("M2DFp");let o=(0,n("eSBJq").AllAnalyticsCookies).AWC_ANALYTICS_DEBUG.getKey(),l="synthetic",c=()=>{try{return JSON.parse(t(a).get(o)||"false")}catch(e){t(a).remove(o)}return!1};var u=class{constructor(){(0,s.default)(this,"_bind",()=>{"undefined"==typeof window||window.testAnalytics||(window.testAnalytics={eventCache:[],events:()=>window.testAnalytics.eventCache,clear:()=>{window.testAnalytics.eventCache=[];try{localStorage.removeItem("awc.ui.viewed.last.sent"),localStorage.removeItem("awc-staging.ui.viewed.last.sent"),localStorage.removeItem("awc-dev.ui.viewed.last.sent"),localStorage.removeItem("awc-local.ui.viewed.last.sent")}catch(e){}}})}),(0,s.default)(this,"_cache",e=>{"undefined"!=typeof window&&(window.testAnalytics.eventCache.length>=100&&(window.testAnalytics.eventCache=window.testAnalytics.eventCache.slice(1,window.testAnalytics.eventCache.length)),window.testAnalytics.eventCache.push(e))}),(0,s.default)(this,"_shouldCacheEvent",()=>this._isDebugCookieEnabled),(0,s.default)(this,"saveEvent",e=>{e&&this._shouldCacheEvent()&&(window.testAnalytics||this._bind(),e.tags instanceof Array?e.tags.push(l):e.tags=[l],this._cache(e))}),this._isDebugCookieEnabled=c(),this._isDebugCookieEnabled&&this._bind()}}}),a("fBPLq",function(t,r){e(t.exports,"default",()=>c);var i=n("bwPfh"),s=n("5zQU9");let a=["embeddedProduct"];function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class c{constructor(e,t,r,o={}){if((0,s.default)(this,"start",()=>{this._startInterval(),this._bindEventListeners()}),(0,s.default)(this,"stop",()=>{this._stopInterval(),this._unbindEventListeners()}),(0,s.default)(this,"resetTimers",()=>{this._intervalId&&(this.stop(),this.start())}),(0,s.default)(this,"_bindEventListeners",()=>{"undefined"!=typeof window&&(window.addEventListener("focus",this._focusListener),window.addEventListener("blur",this._blurListener))}),(0,s.default)(this,"_unbindEventListeners",()=>{"undefined"!=typeof window&&(window.removeEventListener("focus",this._focusListener),window.removeEventListener("blur",this._blurListener))}),(0,s.default)(this,"_startInterval",()=>{clearInterval(this._intervalId),this._intervalId=setInterval(this._handleInterval,this._delay)}),(0,s.default)(this,"_stopInterval",()=>{this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)}),(0,s.default)(this,"_getProductKey",(e,t)=>{let r=e;return t&&(r+=`-${t}`),r}),(0,s.default)(this,"_getLastSentTimestamp",(e,t,r)=>{let i=(((this._parseLocalStorageData()||{})[r]||{})[t]||{})[e]||null;return i}),(0,s.default)(this,"_parseLocalStorageData",()=>{let e=this._safeLocalStorage.getItem(this._storageKey);try{return JSON.parse(e||"")}catch(e){return this._safeLocalStorage.removeItem(this._storageKey),null}}),(0,s.default)(this,"_setLastSentTimestamp",(e,t,r)=>{let i=this._parseLocalStorageData()||{},s=i[r]||{},n=s[t]||{};n[e]=Date.now(),s[t]=n,i[r]=s,this._safeLocalStorage.setItem(this._storageKey,JSON.stringify(i))}),(0,s.default)(this,"_shouldSendEvent",(e,t,r,i)=>{if(!document.hasFocus()||t!==n("hRleJ").tenantType.NONE&&!r||!i)return!1;let s=Date.now()-this._getLastSentTimestamp(e,r,i);return s>this._throttle}),(0,s.default)(this,"_handleInterval",()=>{let e=this._getContext(),{embeddedProduct:t}=e,r=(0,i.default)(e,a);this._sendEvent(this._product,r),t&&this._sendEvent(t,r,!0)}),(0,s.default)(this,"_sendEvent",(e,t,r=!1)=>{let{subproduct:i,tenantIdType:s,tenantId:n,userId:a,lastScreenEvent:o,attributes:l}=t,c=this._getProductKey(e,i);if(this._shouldSendEvent(c,s,n,a)){this._setLastSentTimestamp(c,n,a);let t=this._createEvent(e,i,r,o,l);this._onEvent(t)}}),(0,s.default)(this,"_createEvent",(e,t,r,i,s)=>{let n={product:e,source:"ui",action:"viewed",actionSubject:"ui",attributes:s};return r&&(n.subproduct=null,n.version=null,n.attributes=l(l({},n.attributes),{},{embeddedInEnv:this._productInfo.env,embeddedInProduct:this._productInfo.product,embeddedInSubproduct:t,embeddedInVersion:this._productInfo.version,embeddedInOrigin:this._productInfo.origin,embeddedInPlatform:this._productInfo.platform})),i&&(n.attributes=l(l({},n.attributes),{},{lastScreenEvent:{name:i.name,attributes:i.attributes}})),n}),!e)throw Error("Missing productInfo");if(!e.product)throw Error("Missing productInfo.product");if(!t)throw Error("Missing getContext callback");if("function"!=typeof t)throw Error("Invalid getContext, must be function");if(!r)throw Error("Missing onEvent callback");if("function"!=typeof r)throw Error("Invalid onEvent, must be function");this._productInfo=e,this._product=e.product,this._getContext=t,this._onEvent=r,this._delay=o.delay||2e3,this._throttle=o.throttle||36e5,this._storageKey=o.storageKey||"ui.viewed.last.sent",this._safeLocalStorage=new(n("empVP")).default({envPrefix:this._productInfo.env}),this._focusListener=()=>{this._startInterval()},this._blurListener=()=>{this._stopInterval()}}}}),a("1ZcVH",function(t,r){e(t.exports,"default",()=>i);function i(e,t){return e&&"function"==typeof e?()=>{e(t)}:null}}),a("l4WDe",function(t,r){e(t.exports,"XIDPromise",()=>i);let i=(e,t)=>{if(e&&t&&"function"==typeof t)return Promise.race([t().catch(()=>()=>(0,n("590Mu").createUnknownXid)()),new Promise(e=>{setTimeout(()=>e(()=>(0,n("590Mu").createTimeoutXid)()),n("590Mu").XID_TIMEOUT)})])}}),a("590Mu",function(t,r){e(t.exports,"XID_TIMEOUT",()=>i),e(t.exports,"createTimeoutXid",()=>s),e(t.exports,"createUnknownXid",()=>a);let i=5e3,s=()=>[{type:n("akomA").XIDItemType.XC,state:"TIMEOUT"},{type:n("akomA").XIDItemType.UID,state:"TIMEOUT"}],a=()=>[{type:n("akomA").XIDItemType.XC,state:"UNKNOWN"},{type:n("akomA").XIDItemType.UID,state:"UNKNOWN"}]}),a("akomA",function(t,r){var i,s;e(t.exports,"XIDItemType",()=>n);let n=((i={}).XC="xc",i.UID="uid",i);(s={}).NEW="NEW",s.CHANGED="CHANGED",s.EXISTING="EXISTING",s.TIMEOUT="TIMEOUT",s.ERROR="ERROR",s.UNAVAILABLE="UNAVAILABLE",s.MALFORMED="MALFORMED",s.UNKNOWN="UNKNOWN"}),a("5kOfF",function(t,r){e(t.exports,"canCompress",()=>i),e(t.exports,"buildCompressionFunction",()=>a);let i=e=>"feature"===e.actionSubject&&"exposed"===e.action&&"operational"===e.eventType&&e.attributes&&e.tags&&e.tags.includes("measurement")&&!e.tags.includes("hasCustomAttributes"),s=(e,t=50)=>{if(!e||e.length<=0)return[];if(t<=0)throw Error("Batch size must be greater than 0");let r=e.map(e=>{let{flagKey:t,value:r,reason:i,ruleId:s}=e.attributes;return{key:t,value:r,...i&&{reason:i},...s&&{ruleId:s}}});return n(r,t)},n=(e,t)=>{let r=[];for(let i=0;i<e.length;i+=t){let s=e.slice(i,i+t);r.push({actionSubject:"features",action:"exposed",eventType:"operational",attributes:{evaluations:s},tags:["measurement"],source:"@atlassian/exposure-events-compressor"})}return r},a=e=>t=>s(t,e)}),a("6TYON",function(r,i){e(r.exports,"default",()=>l);var s=n("kU09D"),a=n("eUqFw");let o=(0,n("ajRPm").default)()(n("50oJA").EngagementProvider);var l=(0,n("5Urw3").default)(e=>t(a).createElement(o,(0,s.default)({},e,{store:(0,n("56rs2").default)(e.config)})))}),a("5Urw3",function(r,i){e(r.exports,"default",()=>a);var s=n("eUqFw");function a(e){let r=t(s).createContext(!1);return function(i){return t(s).createElement(r.Consumer,null,n=>n?i.children:t(s).createElement(r.Provider,{value:!0},t(s).createElement(e,i)))}}}),a("56rs2",function(r,i){e(r.exports,"store",()=>c),e(r.exports,"default",()=>u);var s=n("hTLlD"),a=n("huRi7");let o={messageMapping:new Map,current:null,initialized:!1,initializing:!1,config:{cloudId:"",aaid:"",locale:"",product:"",stargateUrl:"",orgId:"",workspaceId:""}},l=(0,n("9bUAF").createCancellationToken)(),c=(0,a.createStore)((e=o,r)=>{switch(r.type){case n("jtW6P").SET_MESSAGE_MAPPING:return{...e,initialized:!0,initializing:!1,messageMapping:r.messageMapping};case n("jtW6P").SET_INITIALIZING:return{...e,config:r.config,initializing:!0};case n("jtW6P").SET_CURRENT:{let{eventMapping:i}=r,{message:n,component:a}=i,o=function(e,r){let i=new Map;return e.forEach((e,n)=>{t(s)(e.component,r)||i.set(n,e)}),i}(e.messageMapping,a);return{...e,current:{messageId:n.messageId,variationId:n.variationId,...a},messageMapping:o}}case n("jtW6P").CLEAR_CURRENT:return{...e,current:null};case n("jtW6P").RESET_STORE:return o;default:return e}});var u=e=>{let t=c.getState();if(t.initializing||t.initialized){if(t.config.cloudId===e.cloudId)return c;l.isCancelled=!0,l=(0,n("9bUAF").createCancellationToken)(),c.dispatch((0,n("jtW6P").resetStore)())}let r={...e};return r.locale=r.locale.replace("_","-"),c.dispatch((0,n("jtW6P").initialize)(r)),(0,n("3DGOA").isMessagingEnabled)()&&(0,n("8zQg9").processMessages)(c,r,l),c}}),a("9bUAF",function(t,r){e(t.exports,"createCancellationToken",()=>i);function i(e=!1){return{isCancelled:e}}}),a("3DGOA",function(t,r){e(t.exports,"isMessagingEnabled",()=>i);function i(){return!(0,n("4K830").isFedRamp)()}}),a("4K830",function(t,r){e(t.exports,"isFedRamp",()=>i);function i(){var e,t;let r=globalThis.MICROS_PERIMETER||globalThis.UNSAFE_ATL_CONTEXT_BOUNDARY;if(r)return r===u;let i=null===(e=globalThis.location)||void 0===e?void 0:null===(t=e.hostname)||void 0===t?void 0:t.match(/atlassian-us-gov-mod\.com|atlassian-us-gov\.com|atlassian-fex\.(com|net)/);return!!i&&i.length>0}});const u="fedramp-moderate";a("jtW6P",function(t,r){e(t.exports,"SET_MESSAGE_MAPPING",()=>i),e(t.exports,"SET_INITIALIZING",()=>s),e(t.exports,"RESET_STORE",()=>n),e(t.exports,"CLEAR_CURRENT",()=>a),e(t.exports,"SET_CURRENT",()=>o),e(t.exports,"resetStore",()=>l),e(t.exports,"initialize",()=>c),e(t.exports,"setMessageMapping",()=>u),e(t.exports,"setCurrent",()=>d),e(t.exports,"clearCurrent",()=>h);let i="SET_MESSAGE_MAPPING",s="SET_INITIALIZING",n="RESET_STORE",a="CLEAR_CURRENT",o="SET_CURRENT",l=()=>({type:n}),c=e=>({type:s,config:e}),u=e=>({type:i,messageMapping:e});function d(e){return{type:o,eventMapping:e}}function h(){return{type:a}}}),a("8zQg9",function(t,r){e(t.exports,"processMessages",()=>s);let i=e=>{let t=new Map;return e.forEach(e=>{let r=e.components;r.forEach((i,s)=>{i.triggers.forEach(n=>{t.set(n,{message:e,component:{componentId:s,isLast:s===r.length-1,...i}})})})}),t};async function s(e,t,r){let a,o;if(r.isCancelled)return;let l=(0,n("56rs2").store).getState(),{cloudId:c,stargateUrl:u,product:d,locale:h}=t;try{let e=await (0,n("eMQs7").getMessages)(c,u,d,h);if(r.isCancelled)return;a=e.messages,o=e.interval}catch(e){return}if(null===l.current){let t=i(a);e.dispatch((0,n("jtW6P").setMessageMapping)(t))}0!==o&&setTimeout(()=>{s(e,t,r)},1e3*o)}}),a("eMQs7",function(r,i){e(r.exports,"getMessages",()=>o),e(r.exports,"startMessage",()=>h),e(r.exports,"stopMessage",()=>f),e(r.exports,"sendUserResponse",()=>g),e(r.exports,"markAsSeenAndFatigued",()=>v);var s=n("asbhz");let a=t(s).parse("/engage-targeting/api/v2/user/{cloudId}/in-product-messages{?product,schema,locale}");async function o(e,t,r,i){return(0,n("fPMXA").stargateFetchRetryOn5xx)(`${t}${a.expand({cloudId:e,product:r,schema:"2",locale:i})}`).then(n("fPMXA").errorIfNotOk).then(e=>e.json().then(t=>({messages:t,interval:Number.parseFloat(e.headers.get("POLL-INTERVAL")||"0")})))}function l(e){return e.status===d}let c=t(s).parse("/engage-targeting/api/v2/user/messages/{messageId}/start"),u=t(s).parse("/engage-targeting/api/v2/user/messages/{messageId}/start/{variationId}");async function h(e){let t={cloudId:e.cloudId,orgId:e.orgId,workspaceId:e.workspaceId};return(0,n("fPMXA").stargateFetchRetryOn5xx)(e.variationId?`${e.stargateUrl}${u.expand({messageId:e.messageId,variationId:e.variationId})}`:`${e.stargateUrl}${c.expand({messageId:e.messageId})}`,{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(n("fPMXA").pullResponseTextIfNotOk).then(l)}let p=t(s).parse("/engage-targeting/api/v2/user/messages/{messageId}/stop");async function f(e){let t={cloudId:e.cloudId,orgId:e.orgId,workspaceId:e.workspaceId};return(0,n("fPMXA").stargateFetchRetryOn5xx)(`${e.stargateUrl}${p.expand({messageId:e.messageId})}`,{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(n("fPMXA").pullResponseTextIfNotOk).then(l)}let m=t(s).parse("/engage-targeting/api/v2/user/{cloudId}/messages/{messageId}/response");async function g(e,t,r,i){return(0,n("fPMXA").stargateFetchRetryOn5xx)(`${t}${m.expand({cloudId:e,messageId:r})}`,{method:"post",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then(n("fPMXA").pullResponseTextIfNotOk).then(()=>Promise.resolve())}let y=t(s).parse("/engage-targeting/api/v2/user/messages/{messageId}/seen");async function v(e){let t={cloudId:e.cloudId,orgId:e.orgId,workspaceId:e.workspaceId};return(0,n("fPMXA").stargateFetchRetryOn5xx)(`${e.stargateUrl}${y.expand({messageId:e.messageId})}`,{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(n("fPMXA").pullResponseTextIfNotOk).then(()=>Promise.resolve())}});const d=204;a("fPMXA",function(t,r){async function i(e){if(!e.ok)throw Error(`${e.status}: ${await e.text()}`);return e}async function s(e){return e.ok||await e.text(),e}function a(e){let t=e.headers.get("X-Failure-Category"),r=!!t&&"throttled"===t.toLowerCase();return 503===e.status&&r}function o(e,t,r=a){var i;return i={...t,credentials:(0,n("ibNDJ").default).includes(location.host)?"include":"same-origin"},c(fetch(e,i),r,()=>(function e(t,r,i,s=0){return c(function(e,t,r){let i=t?6e4*t+Math.round(5e3*Math.random()):0;return new Promise((t,s)=>{setTimeout(()=>{fetch(e,r).then(t).catch(s)},i)})}(t,s,i),r,()=>e(t,r,i,Math.min(0===s?1:2*s,60)))})(e,r,i))}function l(e,t){return o(e,t,e=>e.status>=500&&e.status<=599)}function c(e,t,r){return e.then(e=>t(e)?r():Promise.resolve(e)).catch(r)}e(t.exports,"errorIfNotOk",()=>i),e(t.exports,"pullResponseTextIfNotOk",()=>s),e(t.exports,"stargateFetch",()=>o),e(t.exports,"stargateFetchRetryOn5xx",()=>l)}),a("ibNDJ",function(t,r){e(t.exports,"default",()=>i);var i=["bitbucket-pipelines.dev.public.atl-paas.net","bitbucket-pipelines.staging.public.atl-paas.net","bitbucket-pipelines.prod.public.atl-paas.net"]}),a("50oJA",function(r,i){e(r.exports,"EngagementProvider",()=>p);var s=n("5zQU9"),a=n("eUqFw"),o=n("046kq"),l=n("6l6Xk"),c=n("1Zvbf");function u(e,t){let r=new(n("4dARu")).default({payload:{action:"exposed",actionSubject:"feature",actionSubjectId:e.flagKey,source:"engagement-platform",attributes:e}});Promise.resolve(t).then(e=>{e.sendTrackEvent(r.payload)})}function d(e,t,r){return{reason:"RULE_MATCH",ruleId:"engagement.inproduct",flagKey:`engagement.inproduct.${e}`,value:t,...r}}async function h(e,t,r,i){let{locale:s}=t,{message:a,component:o}=e;if(a.holdout){await (0,n("eMQs7").startMessage)({cloudId:t.cloudId,stargateUrl:t.stargateUrl,messageId:a.messageId,variationId:a.variationId,orgId:t.orgId,workspaceId:t.workspaceId}),await (0,n("eMQs7").stopMessage)({cloudId:t.cloudId,stargateUrl:t.stargateUrl,messageId:a.messageId,orgId:t.orgId,workspaceId:t.workspaceId}),u(d(a.messageId,"holdout",{locale:s}),i);return}if(0===o.componentId){let o=await (0,n("eMQs7").startMessage)({cloudId:t.cloudId,stargateUrl:t.stargateUrl,messageId:a.messageId,variationId:a.variationId,orgId:t.orgId,workspaceId:t.workspaceId});o&&(u(d(a.messageId,a.variationId,{locale:s}),i),r.dispatch((0,n("jtW6P").setCurrent)(e)))}else u(d(a.messageId,a.variationId,{locale:s}),i),r.dispatch((0,n("jtW6P").setCurrent)(e))}class p extends a.Component{constructor(e){super(e),(0,s.default)(this,"onStoreChange",e=>{let{createAnalyticsEvent:t}=this.props,r=this.getConfig(),{locale:i}=r;if(e.initialized){if(!p.hasInitializedAtLeastOneEngagementProvider){this.sendOperationalEventWithClient({action:"loaded",actionSubject:"messages",actionSubjectId:void 0,source:"engagekit",attributes:{locale:i}});let e=(0,n("9LRfM").getBrowserInfo)();this.onEvent(t({event:"engagement.inproduct.loaded",properties:{browser:e.name,browserVersion:e.version}})),p.hasInitializedAtLeastOneEngagementProvider=!0}this.analyticsEventQueue.flush(this.onEvent),this.unsubscribeFromStore&&this.unsubscribeFromStore()}}),(0,s.default)(this,"onEvent",e=>{let r=this.getState();if(!r.initialized){let t=this.analyticsEventQueue.enqueue(e);t||this.fireQueueOverflowEvent();return}let{eventTarget:i,store:s,analyticsClientInstance:a}=this.props,l=this.getConfig(),{current:c,messageMapping:u}=r,d=function(e){let t={...e.payload,context:{}};return Object.assign(t.context,...e.context),t}(e);if(i.dispatchEvent((0,n("aY2VY").default)({eventName:"ep.analyticEvent",canBubble:!1,cancellable:!1,detail:d})),!(0,n("3DGOA").isMessagingEnabled)()||c)return;let p=Array.from(u.keys()).find(e=>t(o)(d,e));p&&h(u.get(p),l,s,a)}),(0,s.default)(this,"onEngagementEvent",e=>{let{action:t,clickType:r,ekMessageId:i,ekVariationId:s,ekComponentId:n,ekComponentType:a,ekIsLast:o}=e.payload,l=this.getConfig(),{locale:c}=l,u={messageId:i,variationId:s,componentIndex:n,locale:c};"click"===t?(this.handleClickEvent(i,s,n),u.buttonType=r,this.sendUIEventWithClient({action:"clicked",actionSubject:"button",actionSubjectId:`${r}Button`,source:`engagement_${a}`,attributes:u})):("shown"===t&&(u.componentType=a,this.sendScreenEventWithClient({name:`engagement_${a}`,attributes:u})),"hidden"===t&&(u.isLast=o,this.sendUIEventWithClient({action:"hid",actionSubject:"component",actionSubjectId:void 0,source:`engagement_${a}`,attributes:u}))),this.onEvent(e)}),(0,s.default)(this,"subscribeEngagementState",e=>{let{store:t}=this.props;return e(t.getState()),t.subscribe(()=>{e(t.getState())})});let{analyticsClientInstance:r}=this.props;this.sendUIEventWithClient=(0,n("hHcrN").sendUIEvent).bind(null,r),this.sendScreenEventWithClient=(0,n("hHcrN").sendScreenEvent).bind(null,r),this.sendOperationalEventWithClient=(0,n("hHcrN").sendOperationalEvent).bind(null,r),this.analyticsEventQueue=new(n("chBKx")).default(100),this.unsubscribeFromStore=this.subscribeEngagementState(this.onStoreChange),this.fireQueueOverflowEvent=t(l)(()=>{})}getConfig(){let{config:e}=this.getState();return e}getChildContext(){return{subscribeEngagementState:this.subscribeEngagementState}}getState(){return this.props.store.getState()}getActiveMessage(){return this.getState().current}completeMessage(e){let t=this.getConfig();(0,n("eMQs7").stopMessage)({cloudId:t.cloudId,stargateUrl:t.stargateUrl,messageId:e,orgId:t.orgId,workspaceId:t.workspaceId})}handleClickEvent(e,t,r){let i=this.getActiveMessage();i&&i.messageId===e&&i.variationId===t&&i.componentId===r&&(i.isLast&&this.completeMessage(e),this.props.store.dispatch((0,n("jtW6P").clearCurrent)()))}componentWillUnmount(){this.unsubscribeFromStore&&this.unsubscribeFromStore()}render(){return t(a).createElement(n("bb7bC").default,{channel:"*",onEvent:this.onEvent},t(a).createElement(n("bb7bC").default,{channel:"engagement",onEvent:this.onEngagementEvent},this.props.children))}}(0,s.default)(p,"childContextTypes",{subscribeEngagementState:t(n("1Qivz")).func}),(0,s.default)(p,"defaultProps",{eventTarget:t(c)}),(0,s.default)(p,"hasInitializedAtLeastOneEngagementProvider",!1)}),a("hHcrN",function(t,r){function i(e,t){Promise.resolve(e).then(e=>{e.sendScreenEvent(t)})}function s(e,t){Promise.resolve(e).then(e=>{e.sendUIEvent(t)})}function n(e,t){Promise.resolve(e).then(e=>{e.sendOperationalEvent(t)})}e(t.exports,"sendScreenEvent",()=>i),e(t.exports,"sendUIEvent",()=>s),e(t.exports,"sendOperationalEvent",()=>n)}),a("9LRfM",function(t,r){e(t.exports,"getBrowserInfo",()=>n);let i=[{name:"IE",pattern:/Trident\/.*; rv:([^;)]+)/},{name:"Chrome",pattern:/Chrome\/([^ )]+)/},{name:"Firefox",pattern:/Firefox\/([^ )]+)/}],s={name:"unknown",version:"unknown"};function n(e){if(!window.navigator)return s;for(let t of(e||(e=window.navigator.userAgent),i)){let r=e.match(t.pattern);if(r)return{name:t.name,version:r[1]}}return s}}),a("aY2VY",function(t,r){e(t.exports,"default",()=>i);var i=({eventName:e,canBubble:t,cancellable:r,detail:i})=>{let s=document.createEvent("CustomEvent");return s.initCustomEvent(e,t,r,i),s}}),a("chBKx",function(t,r){e(t.exports,"default",()=>i);class i{constructor(e){this.queue=[],this.maxSize=e}enqueue(e){return this.queue.length!==this.maxSize&&(this.queue.push(e),!0)}flush(e){this.queue.forEach(e),this.queue=[]}getSize(){return this.queue.length}}}),a("9BA6k",function(t,r){e(t.exports,"default",()=>c);var i=n("5zQU9"),s=n("cJt2B");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let l={initialPollInterval:5e3,idleTimeout:3e4,multiplierCallback:e=>e+e};class c{constructor(e,t,r,a){if((0,i.default)(this,"start",()=>{this.browserInteractionTime.startTimer(),this.browserInteractionTime.addTimeIntervalEllapsedCallback({callback:e=>this._sendDwellEvent(this._eventData,this._searchSessionId,e,!1),timeInMilliseconds:this._timing.initialPollInterval,multiplier:this._timing.multiplierCallback}),"undefined"!=typeof window&&window.addEventListener("beforeunload",this._onBeforeUnload)}),(0,i.default)(this,"stop",()=>{this.browserInteractionTime.isRunning()&&this._sendDwellEvent(this._eventData,this._searchSessionId,this.browserInteractionTime.getTimeInMilliseconds(),!0),this.browserInteractionTime.stopTimer()}),(0,i.default)(this,"newPage",(e,t)=>{(0,n("49KuO").validateDwellBaseEvent)(e),this.stop(),this.browserInteractionTime.reset(),this.setEventData(e),this.setSearchSessionId(t),this.start()}),(0,i.default)(this,"setEventData",e=>{this._eventData=e}),(0,i.default)(this,"getEventData",()=>this._eventData),(0,i.default)(this,"setSearchSessionId",e=>{this._searchSessionId=e}),(0,i.default)(this,"getSearchSessionId",()=>this._searchSessionId),(0,i.default)(this,"destroy",()=>{this.browserInteractionTime.destroy(),"undefined"!=typeof window&&window.removeEventListener("beforeunload",this._onBeforeUnload)}),(0,i.default)(this,"_onBeforeUnload",()=>{this.stop(),this.destroy()}),(0,i.default)(this,"_sendDwellEvent",(e,t,r,i)=>{this._trackCallback({action:"dwelled",actionSubject:e.actionSubject,actionSubjectId:e.actionSubjectId,source:e.source,containerType:e.containerType,containerId:e.containerId,objectType:e.objectType,objectId:e.objectId,attributes:o(o({},{dwellTime:r,searchReferrer:t,finalDwellEvent:i}),e.attributes),tags:e.tags})}),!e)throw Error("trackCallback is required for DwellTimeHelper");(0,n("49KuO").validateDwellBaseEvent)(t),this._trackCallback=e,this._eventData=t,this._searchSessionId=r,this._timing=o(o({},l),a),this.browserInteractionTime=new s.default({idleTimeoutMs:this._timing.idleTimeout,checkCallbacksIntervalMs:500})}}}),a("5HTho",function(r,i){e(r.exports,"default",()=>u);var s=n("5zQU9"),a=n("6rgVQ");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let c={initialPollInterval:5,pollBackoffRate:2,idleTimeout:30};class u{constructor(e,r,i,o){if((0,s.default)(this,"timeMeInitialized",!1),(0,s.default)(this,"start",()=>{if(this.timeMeInitialized)throw Error("DwellTimeHelper should only be initialised once per page load.");this.timeMeInitialized=!0,this._initDwellTimeCounterAndPolling(),"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{this.stop()})}),(0,s.default)(this,"stop",()=>{t(a).isUserCurrentlyOnPage&&this._sendDwellEvent(this._eventData,this._searchSessionId,!0),t(a).stopAllTimers(),t(a).resetAllRecordedPageTimes(),t(a).timeElapsedCallbacks=[],this.timeMeInitialized=!1}),(0,s.default)(this,"newPage",(e,t)=>{(0,n("49KuO").validateDwellBaseEvent)(e),this.stop(),this._eventData=e,this._searchSessionId=t,this._initDwellTimeCounterAndPolling()}),(0,s.default)(this,"_initDwellTimeCounterAndPolling",()=>{t(a).initialize({idleTimeoutInSeconds:this._timing.idleTimeout}),this._pollDwellTime(this._timing.initialPollInterval,this._searchSessionId,this._eventData)}),(0,s.default)(this,"_pollDwellTime",(e,r,i)=>{t(a).callAfterTimeElapsedInSeconds(e,()=>{this._sendDwellEvent(i,r,!1),this._pollDwellTime(e*this._timing.pollBackoffRate,r,i)})}),(0,s.default)(this,"_sendDwellEvent",(e,r,i)=>{let s={dwellTime:t(a).getTimeOnCurrentPageInMilliseconds(),searchReferrer:r,finalDwellEvent:i};this._trackCallback({action:"dwelled",actionSubject:e.actionSubject,actionSubjectId:e.actionSubjectId,source:e.source,containerType:e.containerType,containerId:e.containerId,containers:e.containers,objectType:e.objectType,objectId:e.objectId,attributes:l(l({},s),e.attributes),tags:e.tags})}),!e)throw Error("trackCallback is required for DwellTimeHelper");(0,n("49KuO").validateDwellBaseEvent)(r),this._trackCallback=e,this._eventData=r,this._searchSessionId=i,this._timing=l(l({},c),o)}}}),r.rlb("eEYKu");try{performance.mark("shared~vendor~atlassian~ar.js:eval-stop")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-parcel-source-maps/assets/shared~vendor~atlassian~ar.0e71ad41.js.map
